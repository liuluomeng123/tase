<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>柳儿生辰</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "Microsoft YaHei", sans-serif;
            background-color: #f0f2f5;
            color: #333;
            line-height: 1.6;
        }

        /* 首页装饰图片样式 */
        .home-decoration {
            position: fixed;
            width: 200px;
            height: auto;
            z-index: -1;
        }

        .home-decoration.left-top {
            left: 20px;
            top: 100px;
        }

        .home-decoration.left-bottom {
            left: 20px;
            bottom: 100px;
        }

        .home-decoration.right-top {
            right: 20px;
            top: 100px;
        }

        .home-decoration.right-bottom {
            right: 20px;
            bottom: 100px;
        }

        /* 顶部时间组件 */
        #current-time {
            position: fixed;
            top: 10px;
            right: 20px;
            font-size: 16px;
            background: rgba(255, 255, 255, 0.9);
            padding: 8px 15px;
            border-radius: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        /* 导航按钮 */
        .nav-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 50px auto;
            max-width: 800px;
            flex-wrap: wrap;
        }

        .nav-btn {
            padding: 12px 25px;
            font-size: 18px;
            cursor: pointer;
            border: none;
            border-radius: 25px;
            background: linear-gradient(135deg, #8AA9E0CC, #8AA9E090);
            color: white;
            transition: all 0.3s ease;
            box-shadow: 0 3px 6px rgba(0,0,0,0.1);
        }

        .nav-btn:hover {
            transform: translateY(-2px);
            background: linear-gradient(135deg, #8AA9E0A0, #8AA9E0);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        /* 倒计时区域 */
        .countdown {
            text-align: center;
            margin: 50px auto;
            font-size: 28px;
            font-weight: bold;
            color: #2c3e50;
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            max-width: 800px;
        }

        /* 弹窗样式 */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0);
            z-index: 1003;
            transition: background-color 0.3s ease;
        }

        .modal.show {
            background-color: rgba(0, 0, 0, 0.5);
        }

        .modal-content {
            position: relative;
            margin: 5% auto;
            width: 80%;
            max-width: 600px;
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transform: scale(0.7);
            opacity: 0;
            transition: all 0.3s ease;
        }

        .modal.show .modal-content {
            transform: scale(1);
            opacity: 1;
        }

        @keyframes modalFade {
            from {opacity: 0; transform: translateY(-20px);}
            to {opacity: 1; transform: translateY(0);}
        }

        .modal-title {
            font-size: 24px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 20px;
            color: #2c3e50;
        }

        /* 里程碑样式 */
        .timeline {
            display: none;
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .timeline-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 25px;
            padding: 20px;
        }

        .timeline-item {
            background-color: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .timeline-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .timeline-date {
            font-size: 18px;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 15px;
        }

        .timeline-image {
            width: 100%;
            height: 220px;
            object-fit: cover;
            border-radius: 10px;
            transition: transform 0.3s ease;
        }

        .timeline-desc {
            margin-top: 15px;
            color: #666;
            line-height: 1.6;
        }

        /* 放大查看样式 */
        .lightbox {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10000; /* 放大查看图片置于最顶层 */
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .lightbox.show {
            opacity: 1;
        }

        .lightbox-content {
            position: relative;
            display: flex;
            width: 95%;
            height: 95%;
            margin: 2% auto;
            background-color: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 15px 30px rgba(0,0,0,0.3);
        }

        .lightbox-image {
            flex: 1.5;
            padding: 20px;
            background: #f8f9fa;
            overflow: auto;
            position: relative; /* 添加相对定位 */
        }

        .lightbox-image img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 10px;
            transition: transform 0.3s ease;
            cursor: pointer;
        }

        .lightbox-image img.enlarged {
            transform: scale(1.5);
            cursor: zoom-out;
        }

        .lightbox-info {
            flex: 1;
            padding: 30px;
            background-color: white;
            overflow-y: auto;
        }

        .close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 30px;
            color: black;
            cursor: pointer;
            transition: transform 0.3s ease;
            z-index: 1000;
        }

        .close-btn:hover {
            transform: rotate(90deg);
        }

        /* 小惊喜页面样式 */
        .surprise {
            display: none;
            padding: 30px;
            max-width: 1400px;
            margin: 0 auto;
        }

        /* 贺图网格布局 */
        .surprise-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        /* 贺图项目容器 */
        .surprise-item {
            position: relative;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            cursor: pointer;
            aspect-ratio: 4/3; /* 固定宽高比 */
        }

        /* 贺图图片样式 */
        .surprise-image {
            width: 100%;
            height: 100%;
            object-fit: cover; /* 确保图片填充容器但不变形 */
            transition: transform 0.3s ease;
        }

        /* 贺图标题 */
        .surprise-title {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 10px;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            font-size: 1.1em;
            text-align: center;
        }

        /* 贺图悬停效果 */
        .surprise-item:hover .surprise-image {
            transform: scale(1.05);
        }

        /* 视频容器样式 */
        .video-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
            background: #000;
            border-radius: 8px;
            overflow: hidden;
        }

        .video-container:fullscreen {
            display: flex;
            align-items: center;
            justify-content: center;
            background: black;
            padding: 0;
        }

        .video-container:fullscreen video {
            width: auto;
            height: auto;
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            aspect-ratio: 16/9; /* 保持视频原始比例 */
        }

        /* 播放按钮样式 */
        .video-controls .play-btn {
            background: #8AA9E0;
            border: none;
            min-width: 36px;  /* 设置最小宽度 */
            min-height: 36px;  /* 设置最小高度 */
            width: 36px;      /* 固定宽度 */
            height: 36px;     /* 固定高度 */
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            color: white;
            font-size: 16px;  /* 稍微调小图标 */
            opacity: 1;
            visibility: visible;
            z-index: 2;
            padding: 0;      /* 移除内边距 */
            margin: 0 5px;   /* 添加水平外边距 */
            flex-shrink: 0;  /* 防止按钮被压缩 */
        }

        .video-controls .play-btn i {
            width: auto;     /* 自动宽度 */
            height: auto;    /* 自动高度 */
            display: flex;   /* 使用flex布局 */
            align-items: center;
            justify-content: center;
            font-size: 16px;  /* 确保图标大小一致 */
            line-height: 1;   /* 设置行高为1 */
        }

        .video-controls .play-btn:hover {
            background: #7B99D0;
            transform: scale(1.05);
        }

        /* 进度条 */
        .progress {
            height: 100%;
            background: #8AA9E0CC;
            border-radius: 2px;
            position: relative;
        }

        /* 导航按钮 */
        .nav-button {
            padding: 8px 15px;
            background: #8AA9E0CC;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-button:hover {
            background: #8AA9E0;
            transform: translateY(-2px);
        }

        .nav-button:disabled {
            background: #cccccc;
            cursor: not-allowed;
        }

        /* 时间显示样式 */
        .time-display {
            color: white;
            font-size: 12px;
            min-width: 100px;
            text-align: center;
        }

        /* 音量控制样式 */
        .volume-control {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .volume-btn {
            background: transparent;
            border: none;
            color: white;
            cursor: pointer;
            padding: 5px;
        }

        /* 修改视频滑块样式 */
        .volume-slider {
            width: 60px;
            height: 4px;
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
        }

        /* 移除默认视频控件 */
        video::-webkit-media-controls {
            display: none !important;
        }

        video::-webkit-media-controls-enclosure {
            display: none !important;
        }

        video {
            -webkit-appearance: none;
            appearance: none;
        }

        /* 倍速控制样式 */
        .playback-rate-btn {
            color: white;
            background: transparent;
            border: none;
            padding: 5px 8px;
            cursor: pointer;
            font-size: 14px;
            min-width: 45px;
            text-align: center;
        }

        .playback-rate-menu {
            position: absolute;
            bottom: 40px;
            background: rgba(0, 0, 0, 0.9);
            border-radius: 4px;
            display: none;
            flex-direction: column;
            padding: 5px 0;
        }

        /* 全屏按钮样式 */
        .fullscreen-btn {
            background: transparent;
            border: none;
            color: white;
            cursor: pointer;
            padding: 5px;
            width: 30px;
            height: 30px;
        }

        /* 控件悬停效果 */
        .video-controls button:hover {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
        }

        /* 响应式设计 */
        @media (max-width: 768px) {
            .lightbox-content {
                flex-direction: column;
            }
            
            .lightbox-image {
                flex: 2;
            }
            
            .lightbox-info {
                flex: 1;
            }

            .nav-buttons {
                padding: 0 15px;
            }

            .countdown {
                font-size: 20px;
                padding: 20px;
                margin: 30px 15px;
            }

            .home-decoration {
                width: 100px;
            }
        }
        /* All existing styles remain unchanged */
        /* 所有现有样式保持不变 */
        /* ... */

        /* 新增样式 */
        .floating-message {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 20px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            z-index: 9993; /* 浮动消息 */
            display: none;
            animation: fadeInOut 3s ease;
        }

        @keyframes fadeInOut {
            0%, 100% { opacity: 0; transform: translateY(20px); }
            10%, 90% { opacity: 1; transform: translateY(0); }
        }

        .envelope {
            position: relative;
            width: 625px;
            height: 325px;
            margin: 200px auto;
            cursor: pointer;
            perspective: 1000px;
            z-index: 3;
        }

        .envelope-front {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 10px;
            transition: transform 0.5s ease;
            backface-visibility: hidden;
        }

        .envelope-back {
            position: absolute;
            width: 100%;
            height: 100%;
            background: #f0f0f0;
            border-radius: 10px;
            transform: rotateX(180deg);
            backface-visibility: hidden;
            transition: transform 0.5s ease;
        }

        .letter {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: white;
            border-radius: 10px;
            transform: translateY(-100%);
            transition: transform 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
        }

        .envelope.open .envelope-back {
            transform: rotateX(0);
        }

        .envelope.open .letter {
            transform: translateY(0);
            opacity: 1;
        }

        .cake-container {
            text-align: center;
            margin: 50px auto;
        }

        .cake-image {
            width: 300px; /* 根据需要调整大小 */
            height: auto;
            display: block;
            margin: 0 auto;
        }

        .greeting-image {
            width: 300px; /* 根据需要调整大小 */
            height: auto;
            display: block;
            margin: 20px auto;
        }

        /* 侧边菜单样式 */
        .sidebar {
            position: fixed;
            top: 0;
            left: -250px; /* 初始隐藏在左侧 */
            width: 250px;
            height: 100%;
            background-color: #333;
            color: white;
            transition: left 0.3s ease;
            z-index: 9991; /* 侧边栏 */
            padding-top: 60px;
        }

        .sidebar a {
            padding: 10px 15px;
            text-decoration: none;
            font-size: 18px;
            color: white;
            display: block;
            transition: background 0.3s ease;
        }

        .sidebar a:hover {
            background-color: #575757;
        }

        /* 修改菜单按钮样式 */
        .menu-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            font-size: 30px;
            cursor: pointer;
            z-index: 9992; /* 菜单按钮 */
            transition: opacity 0.3s ease;
        }

        /* 添加隐藏菜单按钮的样式 */
        .menu-btn.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 9990; /* 遮罩层 */
        }

        /* 更新公告模态框样式 */
        .update-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0);
            z-index: 9995; /* 更新公告 */
            transition: background-color 0.3s ease;
        }

        .update-modal.show {
            background-color: rgba(0, 0, 0, 0.5);
        }

        .update-modal-content {
            position: relative;
            margin: 5% auto;
            width: 80%;
            max-width: 800px;
            height: 80vh;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
            transform: scale(0.7);
            opacity: 0;
            transition: all 0.3s ease;
        }

        .update-modal.show .update-modal-content {
            transform: scale(1);
            opacity: 1;
        }

        .update-modal-header {
            padding: 20px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: white;
            border-radius: 10px 10px 0 0;
        }

        .update-modal-title {
            font-size: 1.8em;  /* 标题大小 */
            font-weight: bold;
            color: #333;
        }

        .update-modal-close {
            color: #aaa;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            line-height: 1;
        }

        .update-modal-close:hover {
            color: black;
        }

        .update-modal-body {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }

        /* 更新卡片样式 */
        .update-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: relative;
        }

        /* 滚动条样式 */
        .update-modal-body::-webkit-scrollbar {
            width: 8px;
        }

        .update-modal-body::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }

        .update-modal-body::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }

        .update-modal-body::-webkit-scrollbar-thumb:hover {
            background: #555;
        }

        /* 在现有样式后添加分页相关样式 */
        .pagination {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }

        .page-btn {
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            background: #4CAF50;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .page-btn:hover {
            background: #45a049;
        }

        .surprise-content {
            min-height: 400px;
        }

        /* 添加音乐播放器样式 */
        .music-player {
            background: white;  /* 改为白色底板 */
            border-radius: 10px;
            padding: 15px;
            width: 80%;
            max-width: 600px;
            margin: 20px auto;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);  /* 添加轻微阴影 */
        }

        .song-info {
            color: #333;  /* 深色文字，提高可读性 */
            font-size: 16px;
            margin-bottom: 10px;
            text-align: center;
            font-weight: 500;
        }

        .controls {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 5px;
        }

        .play-btn {
            background: rgba(0, 0, 0, 0.15);  /* 增加不透明度 */
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            color: #333;  /* 深色图标 */
            font-size: 18px;  /* 增大图标尺寸 */
            opacity: 1;  /* 确保按钮完全不透明 */
            visibility: visible;  /* 确保按钮可见 */
            z-index: 2;  /* 确保按钮在最上层 */
        }

        .play-btn:hover {
            background: rgba(0, 0, 0, 0.25);  /* 悬停时更深的背景色 */
            transform: scale(1.05);  /* 悬停时轻微放大 */
        }

        .play-btn i {
            opacity: 1;  /* 确保图标完全不透明 */
            color: #333;  /* 深色图标 */
            font-size: 18px;  /* 增大图标尺寸 */
        }

        .progress-bar {
            flex: 1;
            height: 6px;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 3px;
            position: relative;
            cursor: pointer;
        }

        .progress {
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            background: #4CAF50;
            border-radius: 3px;
        }

        .time {
            color: #666;
            font-size: 14px;
            min-width: 45px;
            text-align: center;
        }

        .update-content {
            /* 为底部添加足够的内边距，避免与更新时间重叠 */
            padding-bottom: 40px;
        }

        .content-section {
            font-size: 1em;  /* 正文大小 */
            margin-bottom: 15px;
        }

        .update-date {
            position: absolute;
            bottom: 20px;
            right: 20px;
            font-size: 1em;
            font-weight: bold;
            color: #333;
        }

        /* 在侧边菜单中添加进度按钮 */
        .sidebar-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px;
            margin-bottom: 10px;
            background: none;
            border: none;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .sidebar-btn:hover {
            background: #555;
        }

        /* 进度窗口 */
        .progress-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 10001; /* 成就窗口提升到最高层级 */
            justify-content: center;
            align-items: center;
        }

        .progress-modal-content {
            position: relative;
            margin: 5% auto;
            width: 80%;
            max-width: 500px;
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transform: scale(0.7);
            opacity: 0;
            transition: all 0.3s ease;
        }

        #progress-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0);
            z-index: 10001; /* 成就窗口提升到最高层级 */
            transition: background-color 0.3s ease;
        }

        #progress-modal.show {
            background-color: rgba(0, 0, 0, 0.5);
        }

        #progress-modal.show .progress-modal-content {
            transform: scale(1);
            opacity: 1;
        }

        .close-btn {
            position: absolute;
            right: 20px;
            top: 10px;
            font-size: 24px;
            font-weight: bold;
            color: #aaa;
            cursor: pointer;
        }

        .close-btn:hover {
            color: black;
        }

        .progress-header {
            margin-bottom: 20px;
        }

        .achievement-stats {
            font-size: 14px;
            color: #666;
            margin-bottom: 10px;
        }

        .progress-bar-container {
            width: 100%;
            height: 20px;
            background-color: #ddd;
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-bar-achievements {
            height: 100%;
            background-color: #4CAF50;
            border-radius: 10px;
            transition: width 0.3s ease;
        }

        .achievement-item {
            margin-bottom: 10px;
            padding: 10px;
            background-color: #f8f9fa;
            border-radius: 5px;
        }

        /* 进度窗口样式 */
        .progress-modal-content {
            max-width: 500px;
        }

        .progress-header {
            margin-bottom: 20px;
        }

        .achievement-stats {
            font-size: 18px;
            margin: 15px 0;
        }

        .progress-bar-container {
            width: 100%;
            height: 20px;
            background-color: #eee;
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-bar-achievements {
            height: 100%;
            background-color: #4CAF50;
            width: 0%;
            transition: width 0.3s ease;
        }

        .achievements-container {
            max-height: 400px;
            overflow-y: auto;
        }

        .achievement-item {
            background: #f5f5f5;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            display: flex;
            align-items: center;
        }

        .achievement-item i {
            margin-right: 10px;
            color: #4CAF50;
        }

        /* 成就解锁提示样式 */
        .achievement-unlock-message {
            background-color: #4CAF50;
            color: black;
            padding: 10px 20px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        /* 侧边栏按钮样式 */
        .sidebar-btn {
            display: block;
            width: 100%;
            padding: 10px 20px;
            text-align: left;
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 16px;
        }

        .sidebar-btn:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        /* 进度窗口样式 */
        #progress-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0);
            z-index: 10001; /* 成就窗口提升到最高层级 */
            transition: background-color 0.3s ease;
        }

        .progress-modal-content {
            position: relative;
            margin: 5% auto;
            width: 80%;
            max-width: 500px;
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transform: scale(0.7);
            opacity: 0;
            transition: all 0.3s ease;
        }

        #progress-modal.show {
            background-color: rgba(0, 0, 0, 0.5);
        }

        #progress-modal.show .progress-modal-content {
            transform: scale(1);
            opacity: 1;
        }

        .progress-header {
            margin-bottom: 20px;
        }

        .achievement-stats {
            font-size: 18px;
            margin: 15px 0;
        }

        .progress-bar-container {
            width: 100%;
            height: 20px;
            background-color: #eee;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .progress-bar-achievements {
            height: 100%;
            background-color: #4CAF50;
            width: 0%;
            transition: width 0.3s ease;
        }

        .achievements-container {
            max-height: 400px;
            overflow-y: auto;
        }

        .achievement-item {
            background: #f5f5f5;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .achievement-item i {
            color: #4CAF50;
        }

        /* 视频面板样式 */
        .video-panel {
            background: #f5f5f5;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .video-title {
            font-size: 14px;
            color: #333;
            margin-bottom: 10px;
            padding: 5px;
        }

        .video-container {
            position: relative;
            width: 100%;
            max-width: 800px; /* 限制最大宽度 */
            margin: 0 auto;
            background: #000;
            border-radius: 8px;
            overflow: hidden;
        }

        .video-container video {
            width: 100%;
            height: auto;
            display: block;
        }

        /* 视频控制栏样式 */
        .video-controls {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            padding: 5px 8px;  /* 减小左右内边距 */
            gap: 4px;  /* 减小元素间距 */
        }

        /* 全屏按钮样式 */
        .fullscreen-btn {
            background: #8AA9E0;
            border: none;
            min-width: 36px;
            min-height: 36px;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            color: white;
            font-size: 16px;
            opacity: 1;
            visibility: visible;
            z-index: 2;
            padding: 0;
            margin: 0 5px;
            flex-shrink: 0;
        }

        .fullscreen-btn:hover {
            background: #7B99D0;
            transform: scale(1.05);
        }

        .fullscreen-btn i {
            width: auto;
            height: auto;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            line-height: 1;
        }

        /* 视频控制栏布局 */
        .video-controls .progress-container {
            flex: 1;
            display: flex;
            align-items: center;
            gap: 8px;  /* 调整进度条区域的间距 */
            margin: 0 4px;  /* 添加适当的外边距 */
        }

        .video-controls .time {
            color: white;
            font-size: 12px;  /* 稍微减小字体 */
            min-width: 40px;  /* 减小最小宽度 */
            text-align: center;
        }

        /* 确保进度条样式正确 */
        .video-controls .progress-bar {
            flex: 1;
            height: 4px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
            cursor: pointer;
            position: relative;
            margin: 0 2px;  /* 添加适当的外边距 */
        }

        .video-controls .progress {
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            background: #8AA9E0;
            border-radius: 2px;
        }

        /* 调整图标大小 */
        .video-controls .play-btn i,
        .video-controls .fullscreen-btn i {
            font-size: 14px;  /* 稍微减小图标大小 */
        }

        /* 控制按钮样式统一调整 */
        .video-controls .play-btn,
        .video-controls .fullscreen-btn {
            min-width: 32px;  /* 稍微减小按钮尺寸 */
            min-height: 32px;
            width: 32px;
            height: 32px;
            margin: 0 2px;  /* 减小按钮外边距 */
        }

        /* 导航按钮 */
        .nav-button {
            padding: 8px 15px;
            background: #8AA9E0CC;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-button:hover {
            background: #8AA9E0;
            transform: translateY(-2px);
        }

        .nav-button:disabled {
            background: #cccccc;
            cursor: not-allowed;
        }

        /* 时间显示样式 */
        .time-display {
            color: white;
            font-size: 12px;
            min-width: 100px;
            text-align: center;
        }

        /* 音量控制样式 */
        .volume-control {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .volume-btn {
            background: transparent;
            border: none;
            color: white;
            cursor: pointer;
            padding: 5px;
        }

        .volume-slider {
            width: 60px;
            height: 4px;
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
        }

        /* 移除默认视频控件 */
        video::-webkit-media-controls {
            display: none !important;
        }

        video::-webkit-media-controls-enclosure {
            display: none !important;
        }

        video {
            -webkit-appearance: none;
            appearance: none;
        }

        /* 倍速控制样式 */
        .playback-rate-btn {
            color: white;
            background: transparent;
            border: none;
            padding: 5px 8px;
            cursor: pointer;
            font-size: 14px;
            min-width: 45px;
            text-align: center;
        }

        .playback-rate-menu {
            position: absolute;
            bottom: 40px;
            background: rgba(0, 0, 0, 0.9);
            border-radius: 4px;
            display: none;
            flex-direction: column;
            padding: 5px 0;
        }

        /* 全屏按钮样式 */
        .fullscreen-btn {
            background: transparent;
            border: none;
            color: white;
            cursor: pointer;
            padding: 5px;
            width: 30px;
            height: 30px;
        }

        /* 控件悬停效果 */
        .video-controls button:hover {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
        }

        .surprise-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .version-number {
            font-size: 1.4em;  /* 介于标题和正文之间的大小 */
            font-weight: bold;  /* 加粗 */
            color: #333;
            margin-bottom: 20px;  /* 与正文保持距离 */
        }

        .timeline-image-container {
            position: relative;
            width: 100%;
            height: 220px;
        }

        .image-count {
            position: absolute;
            bottom: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .lightbox-navigation {
            position: absolute; /* 改为绝对定位 */
            bottom: 40px; /* 距离底部的距离 */
            left: 50%;
            transform: translateX(-50%); /* 水平居中 */
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            background: rgba(255, 255, 255, 0.9); /* 添加半透明背景 */
            padding: 10px 20px;
            border-radius: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            z-index: 1001; /* 确保按钮在图片上层 */
        }

        .nav-button {
            padding: 8px 15px;
            background: #8AA9E0CC;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .nav-button:hover {
            background: #8AA9E0;
            transform: translateY(-2px);
        }

        .nav-button:disabled {
            background: #cccccc;
            cursor: not-allowed;
        }

        .image-counter {
            font-size: 14px;
            color: #333;
            min-width: 50px;
            text-align: center;
        }

        /* 添加图片切换动画相关样式 */
        .lightbox-image {
            position: relative;
            overflow: hidden;
        }

        #lightbox-img {
            transition: transform 0.5s ease, opacity 0.5s ease;
        }

        .slide-left-enter {
            opacity: 0;
            transform: translateX(100%);
        }

        .slide-left-exit {
            opacity: 0;
            transform: translateX(-100%);
        }

        .slide-right-enter {
            opacity: 0;
            transform: translateX(-100%);
        }

        .slide-right-exit {
            opacity: 0;
            transform: translateX(100%);
        }

        /* 添加全屏图片查看样式 */
        .fullscreen-image-view {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: rgba(0, 0, 0, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s ease;
            overflow: hidden; /* 添加这行 */
        }

        .fullscreen-image-view.show {
            background-color: rgba(0, 0, 0, 0.9);
        }

        /* 修改容器样式确保统一大小 */
        .fullscreen-image-container {
            position: relative;
            width: 90vw;
            height: 80vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            background-color: transparent;
        }

        .fullscreen-image-container.show {
            opacity: 1;
            transform: scale(1);
        }

        /* 优化控制按钮样式 */
        .fullscreen-controls {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%) translateY(20px);
            opacity: 0;
            transition: transform 0.3s ease, opacity 0.3s ease;
            display: flex;
            gap: 15px;
            background: rgba(0, 0, 0, 0.7);
            padding: 10px 20px;
            border-radius: 20px;
            align-items: center;
            z-index: 10001;
        }

        .fullscreen-controls.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        /* 按钮样式 */
        .fullscreen-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.2s ease;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .fullscreen-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .fullscreen-btn i {
            font-size: 14px;
        }

        /* 缩放级别显示样式 */
        .zoom-level {
            color: white;
            font-size: 14px;
            padding: 0 10px;
            min-width: 60px;
            text-align: center;
        }

        /* 图片样式 */
        .fullscreen-image {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

        /* 添加这个样式确保图片在放大时也不会超出容器 */
        .fullscreen-image.dragging {
            cursor: grabbing;
            transition: none;
            max-width: 90%;  /* 添加这行 */
            max-height: 90%; /* 添加这行 */
        }

        /* 关闭按钮样式 */
        .fullscreen-close {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            font-size: 30px;
            cursor: pointer;
            z-index: 10001;
            opacity: 0;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transform: rotate(-90deg);
            transition: opacity 0.3s ease, transform 0.3s ease, background-color 0.2s ease;
        }

        .fullscreen-close:hover {
            background: rgba(0, 0, 0, 0.9);
        }

        .fullscreen-close.show {
            opacity: 1;
            transform: rotate(0);
        }

        /* 控制按钮容器样式 */
        .fullscreen-controls {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%) translateY(20px);
            opacity: 0;
            transition: transform 0.3s ease, opacity 0.3s ease;
            display: flex;
            gap: 15px;
            background: rgba(0, 0, 0, 0.7);
            padding: 10px 20px;
            border-radius: 20px;
            align-items: center;
            z-index: 10001;
        }

        .fullscreen-controls.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        /* 按钮样式 */
        .fullscreen-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.2s ease;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .fullscreen-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .fullscreen-btn i {
            font-size: 14px;
        }

        /* 缩放级别显示样式 */
        .zoom-level {
            color: white;
            font-size: 14px;
            padding: 0 10px;
            min-width: 60px;
            text-align: center;
        }

        /* 全屏时的样式 */
        .fullscreen-image-view {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: rgba(0, 0, 0, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
        }

        .fullscreen-image-view .fullscreen-image {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

        .fullscreen-image-view {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
        }
        
        .detail-view-container {
            position: relative;
            width: 90%;
            height: 90%;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }
        
        .fullscreen-image {
            max-width: 90%;
            max-height: 90%;
            object-fit: contain;
            transition: transform 0.3s ease;
        }
        
        .detail-view-close {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 24px;
            cursor: pointer;
            z-index: 10001;
            transition: background 0.3s;
        }
        
        .detail-view-close:hover {
            background: rgba(255, 255, 255, 0.4);
        }
        
        .zoom-controls {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
            background: rgba(0, 0, 0, 0.7);  /* 更深的底板颜色 */
            padding: 10px 15px;
            border-radius: 20px;
            align-items: center;
            border: 1px solid rgba(255, 255, 255, 0.2);  /* 添加边框 */
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);   /* 添加阴影 */
        }
        
        .zoom-btn {
            width: 32px;
            height: 32px;
            border: none;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.9);  /* 更明显的按钮颜色 */
            color: #333;  /* 更深的文字颜色 */
            font-size: 18px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);  /* 按钮阴影 */
        }
        
        .zoom-level {
            min-width: 70px;
            height: 32px;
            border: none;
            border-radius: 16px;
            background: rgba(255, 255, 255, 0.15);  /* 半透明背景 */
            color: white;
            font-size: 14px;
            font-weight: bold;
            text-align: center;
            cursor: default;
            user-select: none;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .zoom-btn:hover {
            background: white;
            transform: scale(1.1);  /* 悬停时轻微放大 */
        }
        
        .fullscreen-image {
            max-width: 90%;
            max-height: 90%;
            object-fit: contain;
            transition: transform 0.3s ease;
            cursor: grab;
            user-select: none;
        }
        
        .fullscreen-image:active {
            cursor: grabbing;
        }
        
        .detail-view-container {
            position: relative;
            width: 90%;
            height: 90%;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        /* 倒计时容器样式 */
        .countdown-container {
            background: rgba(138, 169, 224, 0.1);
            border: 2px solid rgba(138, 169, 224, 0.3);
            border-radius: 15px;
            padding: 15px 30px;
            margin: 20px auto;
            text-align: center;
            box-shadow: 0 4px 15px rgba(138, 169, 224, 0.1);
            backdrop-filter: blur(5px);
            max-width: 800px;
            transition: all 0.3s ease;
        }

        .countdown-container:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(138, 169, 224, 0.15);
            border-color: rgba(138, 169, 224, 0.5);
        }

        /* 倒计时文本样式 */
        .countdown-text {
            font-size: 1.8em;
            color: #4A5568;
            font-weight: 500;
            letter-spacing: 0.5px;
            line-height: 1.4;
            margin: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            gap: 8px;
        }

        /* 数字样式 */
        .countdown-number {
            color: #8AA9E0;
            font-weight: 600;
            background: rgba(255, 255, 255, 0.8);
            padding: 5px 10px;
            border-radius: 8px;
            min-width: 40px;
            display: inline-block;
            text-align: center;
            box-shadow: 0 2px 5px rgba(138, 169, 224, 0.1);
        }

        /* 单位样式 */
        .countdown-unit {
            color: #718096;
            font-size: 0.9em;
            margin: 0 2px;
        }

        /* 倒计时包装器样式 */
        .countdown-wrapper {
            width: 100%;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 20px 0;
        }

        /* 倒计时容器样式 */
        .countdown-container {
            background: rgba(138, 169, 224, 0.1);
            border: 2px solid rgba(138, 169, 224, 0.3);
            border-radius: 15px;
            padding: 15px 30px;
            margin: 0 auto;
            text-align: center;
            box-shadow: 0 4px 15px rgba(138, 169, 224, 0.1);
            backdrop-filter: blur(5px);
            max-width: 800px;
            width: 100%;
            transition: all 0.3s ease;
        }

        .countdown-container:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(138, 169, 224, 0.15);
            border-color: rgba(138, 169, 224, 0.5);
        }

        /* 倒计时文本样式 */
        .countdown-text {
            font-size: 1.8em;
            color: #4A5568;
            font-weight: 500;
            letter-spacing: 0.5px;
            line-height: 1.4;
            margin: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            gap: 8px;
        }

        /* 数字样式 */
        .countdown-number {
            color: #8AA9E0;
            font-weight: 600;
            background: rgba(255, 255, 255, 0.8);
            padding: 5px 10px;
            border-radius: 8px;
            min-width: 40px;
            display: inline-block;
            text-align: center;
            box-shadow: 0 2px 5px rgba(138, 169, 224, 0.1);
        }

        /* 单位样式 */
        .countdown-unit {
            color: #718096;
            font-size: 0.9em;
            margin: 0 2px;
        }

        /* 响应式设计 */
        @media (max-width: 768px) {
            .countdown-text {
                font-size: 1.4em;
            }
            
            .countdown-container {
                padding: 10px 15px;
            }
            
            .countdown-number {
                min-width: 35px;
                padding: 4px 8px;
            }
        }

        .birthday-message {
            background: linear-gradient(45deg, #ff69b4, #ff1493, #ff69b4);
            color: white;
            font-size: 1.5em;
            font-weight: bold;
            padding: 10px 20px;
            border-radius: 15px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            display: inline-block;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            25% { transform: scale(1.2); }
            50% { transform: scale(1); }
            75% { transform: scale(0.8); }
            100% { transform: scale(1); }
        }

        .countdown-number {
            font-weight: bold;
            color: #ff1493;
        }

        .countdown-unit {
            margin-right: 10px;
        }

        .countdown-text {
            font-size: 1.2em;
            text-align: center;
        }
    </style>
</head>
<body>
    <div id="current-time"></div>

    <div class="nav-buttons">
        <button class="nav-btn" onclick="showHome()">首页</button>
        <button class="nav-btn" onclick="showTimeline()">里程碑</button>
        <button class="nav-btn" onclick="showSurprise()">小惊喜</button>
    </div>

    <div class="countdown-wrapper">
        <div class="countdown-container">
            <div class="countdown-text">
                距离柳儿生日还有
                <span class="countdown-number">--</span><span class="countdown-unit">天</span>
                <span class="countdown-number">--</span><span class="countdown-unit">小时</span>
                <span class="countdown-number">--</span><span class="countdown-unit">分钟</span>
                <span class="countdown-number">--</span><span class="countdown-unit">秒</span>
            </div>
        </div>
    </div>

    <div id="home-page">
        <img src="image\独角兽棋子-生日快乐.png" class="home-decoration left-top">
        <img src="image\金箔大气生日快乐.png" class="home-decoration right-top">
        <img src="image\生日快乐蛋糕.png" class="home-decoration left-bottom">
        <img src="image\生日快乐艺术字.png" class="home-decoration right-bottom">
        <div class="nav-buttons">
            <button class="nav-btn" onclick="showInitialThoughts()">建站初心</button>
        </div>
        <img src="image\生日庆祝彩旗.png" class="home - decoration" style="bottom: 0; left: 0%; transform: translateX(50%); width: 50%; height: 50%;">
    </div>

    <div id="timeline-page" class="timeline">
        <div class="timeline-grid">
            <div class="timeline-item" onclick="showLightbox('image/初遇.jpg', '2023年8月24日', '这天我们初次相遇，初遇的那段时间，我们对彼此并非那么熟悉，但随着时间的推移，我们逐渐熟悉彼此，发现了彼此的优点，互相陪伴，互相鼓励，一起游戏，一起聊天，逐渐变成了无话不谈的挚友')">
                <div class="timeline-date">2023年8月24日</div>
                <img src="image/初遇.jpg" class="timeline-image" style="height: 200px; object-fit: cover; object-position: top; mask-image: linear-gradient(to bottom, black 80%, transparent 100%); -webkit-mask-image: linear-gradient(to bottom, black 80%, transparent 100%);">
                <div class="timeline-desc">这天我们初次相遇，初遇的那段时间，我们对彼此并非那么熟悉，但随着时间的推移，我们逐渐熟悉彼此，发现了彼此的优点，互相陪伴，互相鼓励，一起游戏，一起聊天，逐渐变成了无话不谈的挚友</div>
            </div>
            <div class="timeline-item" onclick="showLightbox([
                'image/2023-12-02-我和蓉笙-100天纪念.png',
                'image/2023-12-02 我和蓉笙-100天纪念@1.png',
                'image/2023-12-02 我和蓉笙-100天纪念@2.png'
            ], '2023年12月02日', '这天是我们相识100天纪念日，同时也是你陪我度过的第一个生日，我很开心，也很幸福，可能就是那天，让我们对彼此有了更高的好感，为后来彼此的相爱打下了基础。我永远记得那天，我永远记得你，我永远爱你。')">
                <div class="timeline-date">2023年12月02日</div>
                <div class="timeline-image-container">
                    <img src="image/2023-12-02-我和蓉笙-100天纪念.png" class="timeline-image">
                    <div class="image-count">
                        <i class="fas fa-images"></i>
                        <span>3</span>
                    </div>
                </div>
                <div class="timeline-desc">这天是我们相识100天纪念日，同时也是你陪我度过的第一个生日，我很开心，也很幸福，可能就是那天，让我们对彼此有了更高的好感，为后来彼此的相爱打下了基础。我永远记得那天，我永远记得你，我永远爱你。</div>
            </div>
            <div class="timeline-item" onclick="showLightbox([
                'image/2024年1月24日-幻梦and蓉笙-热气球后的月亮.png',
                'image/2024年1月24日-幻梦、蓉笙-路牌前@2.png',
                'image/2024年1月24日-幻梦、蓉笙-路牌前的花海.png',
                'image/2024年1月24日-蓉笙、幻梦-蓉笙好矮啊哈哈哈.png'
            ], '2024年1月24日', '我们在跑酷途中，停在一个热气球前，一起欣赏着日落；在树屋前欣赏花海；在路牌前拍下了照片，记录下我们的美好瞬间；还乘着马车，走在繁华的街上，我多希望时间能慢一点，再慢一点')">
                <div class="timeline-date">2024年1月24日</div>
                <div class="timeline-image-container">
                    <img src="image/2024年1月24日-幻梦and蓉笙-热气球后的月亮.png" class="timeline-image">
                    <div class="image-count">
                        <i class="fas fa-images"></i>
                        <span>4</span>
                    </div>
                </div>
                <div class="timeline-desc">我们在跑酷途中，停在一个热气球前，一起欣赏着日落；在树屋前欣赏花海；在路牌前拍下了照片，记录下我们的美好瞬间；还乘着马车，走在繁华的街上，我多希望时间能慢一点，再慢一点</div>
            </div>
            <div class="timeline-item" onclick="showLightbox([
                'image/2024年2月25日-柳儿-生存一起睡.png',
                'image/2024年2月25日-柳儿-景色.png',
                'image/2024年2月25日-柳儿-景色-漫漫长夜.png',
                'image/2024年2月25日-柳儿-景色-漫漫长夜-站-巨月.png',
                'image/2024年2月25日-柳儿-景色-漫漫长夜-站-巨月-1.png',
                'image/2024年2月25日-柳儿-景色-漫漫长夜-站-巨月-背面.png',
                'image/2024年2月25日-柳儿-景色-漫漫长夜-站-巨月-侧面.png',
                'image/2024年2月25日-柳儿-景色-漫漫长夜-站-巨月-特殊动作.png',
                'image/2024年2月25日-柳儿-景色-漫漫长夜-坐.png',
                'image/2024年2月25日-柳儿-景色-清爽早晨-坐.png',
                'image/2024年2月25日-柳儿-景色-清新早晨-站-温室.png',
                'image/2024年2月25日-柳儿-景色-清新早晨-站-温室-2.png',
                'image/2024年2月25日-柳儿-景色-清新早晨-站-温室-对视.png',
                'image/2024年2月25日-柳儿-景色-清新早晨-站-温室-特殊角度.png',
                'image/2024年2月25日-柳儿-景色图-清爽早晨-坐.png'
            ], '2024年2月25日', '我们在生存中一起睡觉，如此近的距离，我的心仿佛不再属于我，不再听从我的指挥；我们还一起拍了那么多美丽的照片，记录了许多美好瞬间，留下了许许多多美好的回忆')">
                <div class="timeline-date">2024年2月25日</div>
                <div class="timeline-image-container">
                    <img src="image/2024年2月25日-柳儿-生存一起睡.png" class="timeline-image">
                    <div class="image-count">
                        <i class="fas fa-images"></i>
                        <span>15</span>
                    </div>
                </div>
                <div class="timeline-desc">我们在生存中一起睡觉，如此近的距离，我的心仿佛不再属于我，不再听从我的指挥<br>我们还一起拍了那么多美丽的照片，记录了许多美好瞬间，留下了许许多多美好的回忆</div>
            </div>
            <div class="timeline-item" onclick="showLightbox([
                'image/2024年3月30日-柳儿-池塘倒映着硕大的玫瑰而我的眼中只有你.png',
                'image/2024年3月30日-柳儿-玫瑰花拱门前的你我.png',
                'image/2024年3月30日-柳儿-硕大的玫瑰花前站着你和我.png',
                'image/2024年3月30日-柳儿-站在月亮上眺望玫瑰拱门.png'
            ], '2024年3月30日', '那天我们一起玩了一个跑酷的地图，地图里有那么多的美景，可在我眼中，它们都不及你一丝一毫，我的眼中只有你')">
                <div class="timeline-date">2024年3月30日</div>
                <div class="timeline-image-container">
                    <img src="image/2024年3月30日-柳儿-池塘倒映着硕大的玫瑰而我的眼中只有你.png" class="timeline-image">
                    <div class="image-count">
                        <i class="fas fa-images"></i>
                        <span>4</span>
                    </div>
                </div>
                <div class="timeline-desc">那天我们一起玩了一个跑酷的地图，地图里有那么多的美景，可在我眼中，它们都不及你一丝一毫，我的眼中只有你</div>
            </div>
            <div class="timeline-item" onclick="showLightbox([
                'image/2024年6月10日-柳儿-默契度5200.png'
            ], '2024年6月10日', '我们的默契度达到5200啦！我默默许愿，让我们能一直这样默契下去，直到永远')">
                <div class="timeline-date">2024年6月10日</div>
                <img src="image/2024年6月10日-柳儿-默契度5200.png" class="timeline-image">
                <div class="timeline-desc">我们的默契度达到5200啦！我默默许愿，让我们能一直这样默契下去，直到永远</div>
            </div>
            <div class="timeline-item" onclick="showLightbox([
                'image/2024年7月16日-柳儿and呆萌的樱娃娃店门前-三只小马宝莉.png'
            ], '2024年7月16日', '那天我们一起拍摄了这张图片，仿佛我们真的成为了一家人，我多希望这一切能成真哇')">
                <div class="timeline-date">2024年7月16日</div>
                <div class="timeline-image-container">
                    <img src="image/2024年7月16日-柳儿and呆萌的樱娃娃店门前-三只小马宝莉.png" class="timeline-image">
                    <div class="image-count">
                        <i class="fas fa-images"></i>
                        <span>1</span>
                    </div>
                </div>
                <div class="timeline-desc">那天我们一起拍摄了这张图片，仿佛我们真的成为了一家人，我多希望这一切能成真哇</div>
            </div>
            <div class="timeline-item" onclick="showLightbox([
                'image/2024年7月27日-柳儿-天使与堕天使-救赎感极强.png'
            ], '2024年7月27日', '我收到了你送的安琪儿，我们一起在那张跑酷图中拍下了这张照片，它仿佛有无尽的救赎感，深入了我的内心')">
                <div class="timeline-date">2024年7月27日</div>
                <img src="image/2024年7月27日-柳儿-天使与堕天使-救赎感极强.png" class="timeline-image">
                <div class="timeline-desc">我收到了你送的安琪儿，我们一起在那张跑酷图中拍下了这张照片，它仿佛有无尽的救赎感，深入了我的内心</div>
            </div>
            <div class="timeline-item" onclick="showLightbox([
                'image/2024年8月10日-柳儿-月季花海合照.png',
                'image/2024年8月10日-柳儿-像素画合照.png',
                'image/2024年8月10日-柳儿-祈愿树旁合照.png',
                'image/2024年8月10日-柳儿-繁华森林合照.png',
                'image/2024年8月10日-柳儿-蘑菇房合照.png'
            ], '2024年8月10日', '那天是七夕节，我们在这个我奋斗了那么久的地图中留下了许多回忆，虽然地图已经停止了更新，但我们的记忆依然伴随着我们奋斗下去')">
                <div class="timeline-date">2024年8月10日</div>
                <div class="timeline-image-container">
                    <img src="image/2024年8月10日-柳儿-月季花海合照.png" class="timeline-image">
                    <div class="image-count">
                        <i class="fas fa-images"></i>
                        <span>5</span>
                    </div>
                </div>
                <div class="timeline-desc">那天是七夕节，我们在这个我奋斗了那么久的地图中留下了许多回忆，虽然地图已经停止了更新，但我们的记忆依然伴随着我们奋斗下去</div>
            </div>
            <div class="timeline-item" onclick="showLightbox([
                'image/beta-0.8/2024年8月24日/2024年8月24日配图01.png',
                'image/beta-0.8/2024年8月24日/2024年8月24日配图02.png',
                'image/beta-0.8/2024年8月24日/2024年8月24日配图03.png',
                'image/beta-0.8/2024年8月24日/2024年8月24日配图04.png',
                'image/beta-0.8/2024年8月24日/2024年8月24日配图05.png',
                'image/beta-0.8/2024年8月24日/2024年8月24日配图06.png',
                'image/beta-0.8/2024年8月24日/2024年8月24日配图07.png',
            ], '2024年8月24日', '那天我们在一起玩了把人拉过来这个地图，最初的时候我们在互相打闹，而后来我们则是做了许多暧昧的动作；后来我们去玩了小镇，虽然异常的卡顿，但是我们玩的还是很开心，我抱着你去了我的房子，有许多的人在围观')">
                <div class="timeline-date">2024年8月24日</div>
                <div class="timeline-image-container">
                    <img src="image/beta-0.8/2024年8月24日/2024年8月24日配图01.png" class="timeline-image">
                    <div class="image-count">
                        <i class="fas fa-images"></i>
                        <span>7</span>
                    </div>
                </div>
                <div class="timeline-desc">那天我们在一起玩了把人拉过来这个地图，最初的时候我们在互相打闹，而后来我们则是做了许多暧昧的动作；后来我们去玩了小镇，虽然异常的卡顿，但是我们玩的还是很开心，我抱着你去了我的房子，有许多的人在围观</div>
            </div>
            <div class="timeline-item" onclick="showLightbox([
                'image/2024年10月4日-柳儿and樱-十字路口合照.png'
            ], '2024年10月4日', '那天我们在小镇，一个人扮演父亲，另一个人扮演母亲，我们三个人像是一家人，那么温馨，那么美好')">
                <div class="timeline-date">2024年10月4日</div>
                <img src="image/2024年10月4日-柳儿and樱-十字路口合照.png" class="timeline-image">
                <div class="timeline-desc">那天我们在小镇，一个人扮演父亲，另一个人扮演母亲，我们三个人像是一家人，那么温馨，那么美好</div>
            </div>
            <div class="timeline-item" onclick="showLightbox([
                'image/2024年11月29日-柳儿-树顶拍照-1305x682.png'
            ], '2024年11月29日', '我们一起在心链空间拍下了这张照，我多希望我的心能和你的心连在一起，替你承担所有的痛苦与磨难，让你能健康快乐的长大')">
                <div class="timeline-date">2024年11月29日</div>
                <img src="image/2024年11月29日-柳儿-树顶拍照-1305x682.png" class="timeline-image">
                <div class="timeline-desc">我们一起在心链空间拍下了这张照，我多希望我的心能和你的心连在一起，替你承担所有的痛苦与磨难，让你能健康快乐的长大</div>
            </div>
            <div class="timeline-item" onclick="showLightbox([
                'image/2024年12月15日-柳儿-像我带着女儿.jpg'
            ], '2024年12月15日', '那天我们一起在可以变成怪物的地图中，我们最终击败BOSS，那个在雪原生存中最讨厌的家伙，而我也变成了它，你则是拿着它的脑袋，你在我的臂弯下，仿佛像是我带了女儿一样')">
                <div class="timeline-date">2024年12月15日</div>
                <img src="image/2024年12月15日-柳儿-像我带着女儿.jpg" class="timeline-image">
                <div class="timeline-desc">那天我们一起在可以变成怪物的地图中，我们最终击败BOSS，那个在雪原生存中最讨厌的家伙，而我也变成了它，你则是拿着它的脑袋，你在我的臂弯下，仿佛像是我带了女儿一样</div>
            </div>
            <div class="timeline-item" onclick="showLightbox([
                'image/2024年12月21日-柳儿-终点前的合照 (1).png',
                'image/2024年12月21日-柳儿-终点前的合照 (2).png',
                'image/2024年12月21日-柳儿-草莓前的合照.png',
                'image/2024年12月21日-柳儿-草莓熊前合照-爱心动作.png'
            ], '2024年12月21日', '那天我们一起完成了那次跑酷，我们一起寻找适合拍照的地方，拍了许多照片')">
                <div class="timeline-date">2024年12月21日</div>
                <div class="timeline-image-container">
                    <img src="image/2024年12月21日-柳儿-终点前的合照 (1).png" class="timeline-image">
                    <div class="image-count">
                        <i class="fas fa-images"></i>
                        <span>4</span>
                    </div>
                </div>
                <div class="timeline-desc">那天我们一起完成了那次跑酷，我们一起寻找适合拍照的地方，拍了许多照片</div>
            </div>
            <div class="timeline-item" onclick="showLightbox([
                'image/beta-0.8/2025年1月1日-跨年夜/2025年1月1日配图 (1).jpg',
                'image/beta-0.8/2025年1月1日-跨年夜/2025年1月1日配图 (2).jpg',
                'image/beta-0.8/2025年1月1日-跨年夜/2025年1月1日配图 (3).jpg',
                'image/beta-0.8/2025年1月1日-跨年夜/2025年1月1日配图 (4).jpg',
                'image/beta-0.8/2025年1月1日-跨年夜/2025年1月1日配图 (5).jpg',
                'image/beta-0.8/2025年1月1日-跨年夜/2025年1月1日配图 (6).jpg',
                'image/beta-0.8/2025年1月1日-跨年夜/2025年1月1日配图 (7).jpg',
                'image/beta-0.8/2025年1月1日-跨年夜/2025年1月1日配图 (8).jpg',
            ], '2025年1月1日', '那天我本不能陪你，但我还是来了，尽管是感冒请假吧；那天晚上，我们并没有玩太多的东西，但是我很开心，很幸福，因为有你陪我跨年，陪我度过这个难忘的夜晚')">
                <div class="timeline-date">2025年1月1日</div>
                <div class="timeline-image-container">
                    <img src="image/beta-0.8/2025年1月1日-跨年夜/2025年1月1日配图 (1).jpg" class="timeline-image">
                    <div class="image-count">
                        <i class="fas fa-images"></i>
                        <span>8</span>
                    </div>
                </div>
                <div class="timeline-desc">那天我本不能陪你，但我还是来了，尽管是感冒请假吧；那天晚上，我们并没有玩太多的东西，但是我很开心，很幸福，因为有你陪我跨年，陪我度过这个难忘的夜晚</div>
            </div>
            <div class="timeline-item" onclick="showLightbox([
                'image/beta-0.8/2025年1月4日/2025年1月4日-柳儿-跑酷图-风景 (1).png',
                'image/beta-0.8/2025年1月4日/2025年1月4日-柳儿-跑酷图-风景 (2).png',
                'image/beta-0.8/2025年1月4日/2025年1月4日-柳儿-跑酷图-风景 (3).png',
                'image/beta-0.8/2025年1月4日/2025年1月4日-柳儿-跑酷图-风景 (4).png',
                'image/beta-0.8/2025年1月4日/2025年1月4日-柳儿-跑酷图-风景 (5).png',
                'image/beta-0.8/2025年1月4日/2025年1月4日-柳儿-跑酷图-风景 (6).png',
                'image/beta-0.8/2025年1月4日/2025年1月4日-柳儿-跑酷图-风景 (7).png',
                'image/beta-0.8/2025年1月4日/2025年1月4日-柳儿-跑酷图-风景.jpg',
                'image/beta-0.8/2025年1月4日/2025年1月4日-柳儿-上山顶楼梯合影 (1).png',
                'image/beta-0.8/2025年1月4日/2025年1月4日-柳儿-上山顶楼梯合影 (2).png',
                'image/beta-0.8/2025年1月4日/2025年1月4日-柳儿-上山顶楼梯合影 (3).png',
                'image/beta-0.8/2025年1月4日/2025年1月4日-柳儿-上山顶楼梯合影 (4).png',
                'image/beta-0.8/2025年1月4日/2025年1月4日-柳儿-上山顶楼梯合影 (5).png',
                'image/beta-0.8/2025年1月4日/2025年1月4日-柳儿-桃树前合影.png',
                'image/beta-0.8/2025年1月4日/2025年1月4日-柳儿-桃树前合影（有流星）.png',
                'image/beta-0.8/2025年1月4日/2025年1月4日-柳儿-双向楼梯-下视角.png',
                'image/beta-0.8/2025年1月4日/2025年1月4日-柳儿-双向楼梯-上视角.png',
            ], '2025年1月4日', '那天我们一起玩了许多游戏，尽管面临着“图荒”的窘境，但我们依然玩的很开心；在那张跑酷地图中，我们在旅途中等待着彼此，并在结束后拍了照片；晚上，我们一起玩了娱乐的地图，随后来到了这个地图，我们找了许多地方，最后选择了这三个地方，拍下照片当做纪念')">
                <div class="timeline-date">2025年1月4日</div>
                <div class="timeline-image-container">
                    <img src="image/beta-0.8/2025年1月4日/2025年1月4日-柳儿-跑酷图-风景 (1).png" class="timeline-image">
                    <div class="image-count">
                        <i class="fas fa-images"></i>
                        <span>17</span>
                    </div>
                </div>
                <div class="timeline-desc">那天我们一起玩了许多游戏，尽管面临着"图荒"的窘境，但我们依然玩的很开心；在那张跑酷地图中，我们在旅途中等待着彼此，并在结束后拍了照片；晚上，我们一起玩了娱乐的地图，随后来到了这个地图，我们找了许多地方，最后选择了这三个地方，拍下照片当做纪念</div>
            </div>
        </div>
    </div>

    <div id="surprise-page" class="surprise">
        <!-- 分页内容容器 -->
        <div id="surprise-content-1" class="surprise-content">
            <!-- 第1页：音乐按钮 -->
            <div class="music-player">
                <div class="song-info">我的梦 - 韩甜甜、小石头和孩子们</div>
                <div class="controls">
                    <button class="play-btn" id="playBtn" onclick="toggleMusic()">
                        <i class="fas fa-play"></i>
                    </button>
                    <div class="progress-bar">
                        <div class="progress" id="progress"></div>
                    </div>
                    <span class="time" id="currentTime">00:00</span>
                    <span class="time">/</span>
                    <span class="time" id="duration">00:00</span>
                </div>
            </div>
            <audio id="bgMusic" src="song\韩甜甜_小石头和孩子们-我的梦(Live).mp3"></audio>
        </div>

        <div id="surprise-content-2" class="surprise-content" style="display: none;">
            <!-- 第2页：视频内容 -->
            <div class="surprise-grid">
                <div class="video-panel">
                    <div class="video-title">测试-videos-测试1.mp4</div>
                    <div class="video-container">
                        <video width="100%" height="100%" controls preload="metadata">
                            <source src="videos/测试-videos-测试1.mp4" type="video/mp4">
                            您的浏览器不支持 video 标签。
                        </video>
                    </div>
                </div>
                <div class="video-panel">
                    <div class="video-title">测试-videos-测试2.mp4</div>
                    <div class="video-container">
                        <video width="100%" height="100%" controls>
                            <source src="videos/测试-videos-测试2.mp4" type="video/mp4">
                            您的浏览器不支持 video 标签。
                        </video>
                    </div>
                </div>
                <div class="video-panel">
                    <div class="video-title">测试-videos-测试3.mp4</div>
                    <div class="video-container">
                        <video width="100%" height="100%" controls>
                            <source src="videos/测试-videos-测试3.mp4" type="video/mp4">
                            您的浏览器不支持 video 标签。
                        </video>
                    </div>
                </div>
            </div>
        </div>

        <div id="surprise-content-3" class="surprise-content" style="display: none;">
            <!-- 第3页：贺图内容 -->
            <div class="surprise-grid">
                <div class="surprise-item" onclick="showLightbox('image/柳儿生日贺图-1.jpg', '贺图1', '')">
                    <div class="surprise-title">贺图1</div>
                    <img src="image\柳儿生日贺图-1.jpg" class="surprise-image">
                </div>
                <div class="surprise-item" onclick="showLightbox('image/柳儿生日贺图-2.jpg', '贺图2', '')">
                    <div class="surprise-title">贺图2</div>
                    <img src="image\柳儿生日贺图-2.jpg" class="surprise-image">
                </div>
                <div class="surprise-item" onclick="showLightbox('image/柳儿生日贺图-3.jpg', '贺图3', '')">
                    <div class="surprise-title">贺图3</div>
                    <img src="image\柳儿生日贺图-3.jpg" class="surprise-image">
                </div>
            </div>
        </div>

        <div id="surprise-content-4" class="surprise-content" style="display: none;">
            <!-- 第4页：隐藏内容 -->
            <div class="cake-container">
                <img src="image/公主生日蛋糕.png" class="cake-image">
                <img src="image/新贺图-信格式-隐藏页面下的图.jpg" class="greeting-image">
            </div>
        </div>

        <!-- 分页按钮 -->
        <div class="pagination">
            <button onclick="changePage('prev')" class="page-btn">上一页</button>
            <button onclick="goToPage(1)" class="page-btn">1</button>
            <button onclick="goToPage(2)" class="page-btn">2</button>
            <button onclick="goToPage(3)" class="page-btn">3</button>
            <button onclick="goToPage(4)" class="page-btn" id="page4Btn" style="display: none;">4</button>
            <button onclick="changePage('next')" class="page-btn">下一页</button>
        </div>
    </div>

    <div id="new-surprise-page" class="surprise" style="display: none;">
        <div class="cake-container">
            <img src="image/公主生日蛋糕.png" class="cake-image">
            <img src="image/新贺图-信格式-隐藏页面下的图.jpg" class="greeting-image">
        </div>
    </div>

    <div class="modal" id="thoughts-modal">
        <div class="modal-content" style="margin: 10% auto;">
            <h2 class="modal-title">建站初心</h2>
            <div style="max-height: 400px; overflow-y: auto; padding-right: 10px;">
                <p>这封信写于2024年12月7日<br>
                此网站的初步计划始于2024年12月5日<br>
                计划的正式实施是在2024年12月6日<br>
                我承认，制作的时间很短，也很草率，因此这个网站自然也不会是多么精细，必然会是一个很简陋、很粗糙的网站<br>
                最初的设计是在纸上绘画的计划草图，而周末回家后，我便努力把它从纸上的稿件和脑海中的遐想变为现实中可以看到的、可以被交互的、真实的内容。<br>
                我建立这个网站（虽然可能算不上网站），最多的是想给我的宝宝一个惊喜，我给不了她什么贵重的东西，也给不了什么让人羡慕的东西，这个网站不是多么精细，这点我清楚，我的水平不高，但我想尽自己所能，给她一个惊喜，我在网站内记录了我和她一路走来的许多经历，放了些许我自己制作的祝贺礼物，实际上更多的可能还是希望她能够开心吧，这或许就是我建立这个网站的初心。<br>
                <div style="text-align: right">——2024年12月7日 晚<br>开发者：柳洛梦<br>OS：是一个小废柴</div></p>
            </div>
        </div>
    </div>

    <div class="lightbox" id="lightbox">
        <div class="lightbox-content">
            <span class="close-btn" onclick="hideLightbox()">&times;</span>
            <div class="lightbox-image">
                <img id="lightbox-img" src="">
                <div class="lightbox-navigation">
                    <button class="nav-button" id="prev-image" onclick="changeImage(-1)">上一张</button>
                    <span class="image-counter" id="image-counter">1/1</span>
                    <button class="nav-button" id="next-image" onclick="changeImage(1)">下一张</button>
                </div>
            </div>
            <div class="lightbox-info">
                <h2 id="lightbox-date"></h2>
                <p id="lightbox-desc"></p>
            </div>
        </div>
    </div>

    <!-- 三道横线按钮 -->
    <div class="menu-btn" onclick="toggleSidebar()">&#9776;</div>

    <!-- 侧边菜单 -->
    <div class="sidebar" id="sidebar">
        <a href="#" onclick="showUpdateNotice()">更新公告</a>
        <button onclick="showProgress()" class="sidebar-btn">
            <i class="fas fa-trophy"></i> 进度
        </button>
        <a href="#" onclick="showWaitingMessage()">等待更新……</a>
    </div>

    <!-- 覆盖层 -->
    <div class="overlay" id="overlay" onclick="toggleSidebar()"></div>

    <!-- 更新公告模态框 -->
    <div id="updateModal" class="update-modal">
        <div class="update-modal-content">
            <div class="update-modal-header">
                <div class="update-modal-title">更新公告</div>
                <span class="update-modal-close" onclick="closeUpdateModal()">&times;</span>
            </div>
            <div class="update-modal-body">
                <!-- beta0.4 更新内容 -->
                <div class="update-card">
                    <div class="version-number">版本号：beta0.4</div>
                    <div class="update-content">
                        <div class="content-title">更新内容</div>
                        <div class="content-section">
                            <div class="section-title">一、优化</div>
                            <div class="section-item">1. 修改放大后视图的关闭按钮颜色为黑色</div>
                            <div class="section-item">2. 修改放大后视图的关闭按钮位置为相对于底板，而不是相对于整个页面</div>
                        </div>
                        <div class="content-section">
                            <div class="section-title">二、新增</div>
                            <div class="section-item">1. 新增侧边菜单的更新公告</div>
                            <div class="section-item">2. 新增小惊喜中的彩蛋按钮</div>
                            <div class="section-item">3. 新增隐藏的惊喜</div>
                            <div class="section-item">4. 新增右下角提醒消息</div>
                        </div>
                        <div class="content-section">
                            <div class="section-title">三、修复</div>
                            <div class="section-item">1. 修复了在放大后视图下使用鼠标滚轮时，网页页面会滚动的问题</div>
                            <div class="section-item">2. 修复了部分区域文本存在乱码的bug</div>
                        </div>
                    </div>
                    <div class="update-date">更新时间：2024年12月15日</div>
                </div>

                <!-- beta0.5 更新内容 -->
                <div class="update-card">
                    <div class="version-number">版本号：beta0.5</div>
                    <div class="update-content">
                        <div class="content-title">更新内容</div>
                        <div class="content-section">
                            <div class="section-title">一、优化</div>
                            <div class="section-item">1. 优化了侧边菜单开始按钮的层级问题，使得其不会遮挡其他内容</div>
                            <div class="section-item">2. 优化了小惊喜页面的排版，使其更加美观</div>
                            <div class="section-item">3. 优化了小惊喜页面的音乐窗口（当前使用的是测试音乐）</div>
                            <div class="section-item">4. 优化了小惊喜页面的视频窗口，并添加了测试视频</div>
                            <div class="section-item">5. 优化了更新公告的展示</div>
                            <div class="section-item">6. 优化了更新公告、建站初心的动画，使得其不那么僵硬</div>
                        </div>
                        <div class="content-section">
                            <div class="section-title">二、新增</div>
                            <div class="section-item">1. 新增了些许彩蛋</div>
                            <div class="section-item">2. 新增了成就系统</div>
                        </div>
                        <div class="content-section">
                            <div class="section-title">三、移除</div>
                            <div class="section-item">1. 移除了beta0.4版本中新增的"隐藏的惊喜、小惊喜中的菜单按钮"</div>
                        </div>
                    </div>
                    <div class="update-date">更新时间：2024年12月20日</div>
                </div>

                <!-- beta0.6 更新内容 -->
                <div class="update-card">
                    <div class="version-number">版本号：beta0.6</div>
                    <div class="update-content">
                        <div class="content-title">更新内容</div>
                        <div class="content-section">
                            <div class="section-title">一、修改</div>
                            <div class="section-item">1. 修改 时间线排序 为 里程碑 </div>
                            <div class="section-item">2. 修改 里程碑 页面下图片为多图片（可切换）</div>
                            <div class="section-title">二、新增</div>
                            <div class="section-item">1. 新增 里程碑 页面下图片的切换功能、多图片功能</div>
                        </div>
                    </div>
                    <div class="update-date">更新时间：2024年12月21日</div>
                </div>

                <!-- beta0.7 更新内容 -->
                <div class="update-card">
                    <div class="version-number">版本号：beta0.7</div>
                    <div class="update-content">
                        <div class="content-title">更新内容</div>
                        <div class="content-section">
                            <div class="section-title">一、优化</div>
                            <div class="section-item">1. 优化了小惊喜页面视频组件、贺图组件</div>
                            <div class="section-item">2. 优化了里程碑的图片及按钮</div>
                            <div class="section-item">3. 优化了首页倒计时组件</div>
                            <div class="section-title">二、新增</div>
                            <div class="section-item">1. 新增里程碑页面下图片的放大查看功能，单击里程碑下的图片组，在弹出的页面下点击图片即可放大查看</div>
                            <div class="section-title">三、修复</div>
                            <div class="section-item">1. 修复了倒计时组件到时间后不显示生日祝福的bug</div>
                            <div class="section-title">四、修改</div>
                            <div class="section-item">1. 将导航栏等处的按钮样式进行修改，使其更加美观</div>
                        </div>
                    </div>
                    <div class="update-date">更新时间：2024年12月28日</div>
                </div>

            </div>
        </div>
    </div>

    <!-- 进度窗口 -->
    <div id="progress-modal" class="modal">
        <div class="modal-content progress-modal-content">
            <span class="close-btn" onclick="closeProgressModal()">&times;</span>
            <div class="progress-header">
                <h2>解锁进度</h2>
                <div class="achievement-stats">
                    已解锁：<span id="unlocked-count">0</span> / <span id="total-count">0</span>
                </div>
                <div class="progress-bar-container">
                    <div class="progress-bar-achievements" id="achievements-progress"></div>
                </div>
            </div>
            <div class="achievements-container" id="achievements-list">
                <!-- 成就列表将通过 JavaScript 动态添加 -->
            </div>
        </div>
    </div>

    <script>
        // JavaScript代码保持不变
        // 更新当前时间
        function updateCurrentTime() {
            const now = new Date();
            document.getElementById('current-time').textContent = 
                now.toLocaleString('zh-CN', { 
                    year: 'numeric', 
                    month: '2-digit', 
                    day: '2-digit',
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit'
                });
        }

        // 检查是否为首页的函数
        function isHomePage() {
            // 获取当前页面的路径
            const currentPath = window.location.pathname;
            
            // 检查是否包含其他页面的标识
            const isOtherPage = currentPath.includes('milestone.html') || 
                               currentPath.includes('surprise.html') || 
                               currentPath.includes('memory.html');
            
            // 如果不是其他页面，则认为是首页
            return !isOtherPage;
        }

        // 计算下一个生日的函数
        function getNextBirthday() {
            const now = new Date();
            const currentYear = now.getFullYear();
            const birthday = new Date(currentYear, 3, 7); // 4月7日
            
            if (now > birthday) {
                birthday.setFullYear(currentYear + 1);
            }
            
            return birthday;
        }

        // 数字补零函数
        function padZero(num) {
            return num < 10 ? `0${num}` : num;
        }

        // 检查是否为生日当天
        function isBirthday(date) {
            return date.getMonth() === 3 && date.getDate() === 7; // 4月7日
        }

        // 检查是否已过生日但还未到第二天
        function isBirthdayPeriod(now, targetDate) {
            return isBirthday(now) && now < new Date(now.getFullYear(), 3, 8, 0, 0, 0);
        }

        // 更新倒计时的函数
        function updateCountdown() {
            const countdownText = document.querySelector('.countdown-text');
            if (!countdownText) return;

            const now = new Date();
            const targetDate = getNextBirthday();
            
            // 如果是生日当天
            if (isBirthdayPeriod(now, targetDate)) {
                countdownText.innerHTML = `
                    <span class="birthday-message">今天是我的小呆瓜的生日，祝小柳儿生日快乐！🎂✨</span>
                `;
                return;
            }

            const diff = targetDate - now;
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);

            countdownText.innerHTML = `
                距离柳儿生日还有
                <span class="countdown-number">${days}</span><span class="countdown-unit">天</span>
                <span class="countdown-number">${padZero(hours)}</span><span class="countdown-unit">小时</span>
                <span class="countdown-number">${padZero(minutes)}</span><span class="countdown-unit">分钟</span>
                <span class="countdown-number">${padZero(seconds)}</span><span class="countdown-unit">秒</span>
            `;
        }

        // 初始化倒计时组件
        function initCountdown() {
            // 只在首页初始化倒计时
            if (!isHomePage()) {
                // 如果不是首页，移除已存在的倒计时组件
                const existingCountdown = document.querySelector('.countdown-wrapper');
                if (existingCountdown) {
                    existingCountdown.remove();
                }
                return;
            }

            // 检查是否已存在倒计时组件
            if (document.querySelector('.countdown-wrapper')) return;

            // 创建倒计时容器
            const countdownWrapper = document.createElement('div');
            countdownWrapper.className = 'countdown-wrapper';
            countdownWrapper.innerHTML = `
                <div class="countdown-container">
                    <div class="countdown-text">
                        距离柳儿生日还有
                        <span class="countdown-number">--</span><span class="countdown-unit">天</span>
                        <span class="countdown-number">--</span><span class="countdown-unit">小时</span>
                        <span class="countdown-number">--</span><span class="countdown-unit">分钟</span>
                        <span class="countdown-number">--</span><span class="countdown-unit">秒</span>
                    </div>
                </div>
            `;
            
            // 将倒计时插入到导航栏后面
            const navBar = document.querySelector('.nav-bar');
            if (navBar && navBar.parentNode) {
                navBar.parentNode.insertBefore(countdownWrapper, navBar.nextSibling);
                
                // 启动倒计时
                updateCountdown();
                setInterval(updateCountdown, 1000);
            }
        }

        // 在页面加载和切换页面时都初始化倒计时
        document.addEventListener('DOMContentLoaded', initCountdown);
        window.addEventListener('popstate', initCountdown);

        function showInitialThoughts() {
            const menuBtn = document.querySelector('.menu-btn');
            menuBtn.classList.add('hidden');
            const modal = document.getElementById('thoughts-modal');
            if (modal) {
                modal.style.display = 'block';
                handleThoughtsModalScroll();
                setTimeout(() => {
                    modal.classList.add('show');
                }, 10);
            }
        }

        function showHome() {
            document.getElementById('home-page').style.display = 'block';
            document.getElementById('timeline-page').style.display = 'none';
            document.getElementById('surprise-page').style.display = 'none';
            updateCountdownVisibility(); // 添加这行
        }

        function showTimeline() {
            document.getElementById('home-page').style.display = 'none';
            document.getElementById('timeline-page').style.display = 'block';
            document.getElementById('surprise-page').style.display = 'none';
            updateCountdownVisibility(); // 添加这行
        }

        function showSurprise() {
            document.getElementById('home-page').style.display = 'none';
            document.getElementById('timeline-page').style.display = 'none';
            document.getElementById('surprise-page').style.display = 'block';
            updateCountdownVisibility(); // 添加这行
        }

        function showLightbox(imageSrc, date, description) {
            const lightbox = document.getElementById('lightbox');
            const lightboxImg = document.getElementById('lightbox-img');
            const lightboxDate = document.getElementById('lightbox-date');
            const lightboxDesc = document.getElementById('lightbox-desc');
            const imageCounter = document.getElementById('image-counter');
            const prevButton = document.getElementById('prev-image');
            const nextButton = document.getElementById('next-image');
            
            // 设置放大页面的内容
            if (Array.isArray(imageSrc)) {
                currentImages = imageSrc;
                currentImageIndex = 0;
                lightboxImg.src = imageSrc[0];
                imageCounter.textContent = `1/${imageSrc.length}`;
                
                // 设置导航按钮状态
                prevButton.disabled = true; // 第一张图片时禁用上一页按钮
                nextButton.disabled = imageSrc.length === 1; // 只有一张图片时禁用下一页按钮
                
                // 添加视觉反馈
                prevButton.style.opacity = '0.5';
                prevButton.style.cursor = 'not-allowed';
                if (imageSrc.length === 1) {
                    nextButton.style.opacity = '0.5';
                    nextButton.style.cursor = 'not-allowed';
                } else {
                    nextButton.style.opacity = '1';
                    nextButton.style.cursor = 'pointer';
                }
            } else {
                currentImages = [imageSrc];
                currentImageIndex = 0;
                lightboxImg.src = imageSrc;
                imageCounter.textContent = '1/1';
                
                // 单张图片时禁用两个导航按钮
                prevButton.disabled = true;
                nextButton.disabled = true;
                
                // 添加视觉反馈
                prevButton.style.opacity = '0.5';
                nextButton.style.opacity = '0.5';
                prevButton.style.cursor = 'not-allowed';
                nextButton.style.cursor = 'not-allowed';
            }
            
            lightboxDate.textContent = date || '';
            lightboxDesc.textContent = description || '';
            
            // 显示放大页面
            lightbox.style.display = 'block';
            setTimeout(() => lightbox.classList.add('show'), 10);
            
            // 移除旧的点击事件监听器
            lightboxImg.removeEventListener('click', showDetailView);
            
            // 创建详情视图的函数
            function showDetailView(e) {
                e.stopPropagation();
                
                // 移除所有现有的详情视图
                document.querySelectorAll('.fullscreen-image-view').forEach(v => v.remove());
                
                // 创建新的详情视图
                const viewer = document.createElement('div');
                viewer.className = 'fullscreen-image-view';
                
                // 创建图片容器
                const imgContainer = document.createElement('div');
                imgContainer.className = 'detail-view-container';
                
                // 创建图片元素
                const img = document.createElement('img');
                img.className = 'fullscreen-image';
                img.src = lightboxImg.src;
                img.draggable = false;
                
                // 添加到DOM
                imgContainer.appendChild(img);
                viewer.appendChild(imgContainer);
                document.body.appendChild(viewer);
                
                // 添加关闭按钮
                const closeBtn = document.createElement('button');
                closeBtn.className = 'detail-view-close';
                closeBtn.innerHTML = '&times;';
                closeBtn.title = '关闭';
                viewer.appendChild(closeBtn);
                
                // 变量初始化
                let isDragging = false;
                let startX, startY;
                let translateX = 0;
                let translateY = 0;
                let currentScale = 1;
                const SCALE_LIMITS = {
                    min: 0.5,
                    max: 3
                };
                
                // 创建缩放控制
                const zoomControls = document.createElement('div');
                zoomControls.className = 'zoom-controls';
                
                const zoomOut = document.createElement('button');
                zoomOut.className = 'zoom-btn';
                zoomOut.innerHTML = '-';
                zoomOut.title = '缩小';
                
                const zoomLevel = document.createElement('button');
                zoomLevel.className = 'zoom-level';
                zoomLevel.innerHTML = '100%';
                zoomLevel.title = '当前比例';
                zoomLevel.disabled = true;
                
                const zoomIn = document.createElement('button');
                zoomIn.className = 'zoom-btn';
                zoomIn.innerHTML = '+';
                zoomIn.title = '放大';
                
                const resetZoom = document.createElement('button');
                resetZoom.className = 'zoom-btn';
                resetZoom.innerHTML = '↺';
                resetZoom.title = '重置大小';
                
                // 组装缩放控制
                zoomControls.appendChild(zoomOut);
                zoomControls.appendChild(zoomLevel);
                zoomControls.appendChild(zoomIn);
                zoomControls.appendChild(resetZoom);
                viewer.appendChild(zoomControls);
                
                // 更新图片变换函数
                function updateImageTransform() {
                    img.style.transform = `scale(${currentScale}) translate(${translateX/currentScale}px, ${translateY/currentScale}px)`;
                }
                
                // 更新缩放函数
                function updateScale(newScale) {
                    const oldScale = currentScale;
                    currentScale = Math.min(Math.max(newScale, SCALE_LIMITS.min), SCALE_LIMITS.max);
                    
                    // 获取容器和图片的尺寸
                    const containerRect = imgContainer.getBoundingClientRect();
                    const imgRect = img.getBoundingClientRect();
                    
                    // 计算新的缩放后的尺寸
                    const newScaledWidth = imgRect.width * (currentScale / oldScale);
                    const newScaledHeight = imgRect.height * (currentScale / oldScale);
                    
                    // 调整位移以保持图片在视图中心
                    translateX = translateX * (currentScale / oldScale);
                    translateY = translateY * (currentScale / oldScale);
                    
                    // 如果缩放后的尺寸小于容器，则居中显示
                    if (newScaledWidth <= containerRect.width) {
                        translateX = 0;
                    } else {
                        // 确保缩放后图片不会露出空白
                        const maxX = (newScaledWidth - containerRect.width) / 2;
                        translateX = Math.min(Math.max(translateX, -maxX), maxX);
                    }
                    
                    if (newScaledHeight <= containerRect.height) {
                        translateY = 0;
                    } else {
                        // 确保缩放后图片不会露出空白
                        const maxY = (newScaledHeight - containerRect.height) / 2;
                        translateY = Math.min(Math.max(translateY, -maxY), maxY);
                    }
                    
                    updateImageTransform();
                    zoomLevel.innerHTML = `${Math.round(currentScale * 100)}%`;
                }
                
                // 绑定缩放按钮事件
                zoomIn.onclick = (e) => {
                    e.stopPropagation();
                    updateScale(currentScale + 0.2);
                };
                
                zoomOut.onclick = (e) => {
                    e.stopPropagation();
                    updateScale(currentScale - 0.2);
                };
                
                resetZoom.onclick = (e) => {
                    e.stopPropagation();
                    currentScale = 1;
                    translateX = 0;
                    translateY = 0;
                    updateImageTransform();
                    zoomLevel.innerHTML = '100%';
                };
                
                // 绑定拖拽事件
                img.addEventListener('mousedown', function(e) {
                    isDragging = true;
                    startX = e.clientX - translateX;
                    startY = e.clientY - translateY;
                    img.style.cursor = 'grabbing';
                    e.preventDefault();
                });
                
                document.addEventListener('mousemove', function(e) {
                    if (!isDragging) return;
                    
                    let newTranslateX = e.clientX - startX;
                    let newTranslateY = e.clientY - startY;
                    
                    const imgRect = img.getBoundingClientRect();
                    const containerRect = imgContainer.getBoundingClientRect();
                    
                    // 计算图片的实际尺寸（考虑缩放）
                    const scaledWidth = imgRect.width * currentScale;
                    const scaledHeight = imgRect.height * currentScale;
                    
                    // 计算容器和图片的尺寸差
                    const diffX = containerRect.width - scaledWidth;
                    const diffY = containerRect.height - scaledHeight;
                    
                    // 如果图片小于容器，居中显示
                    if (scaledWidth <= containerRect.width) {
                        translateX = 0;
                    } else {
                        // 确保图片左边缘不会超出容器左边缘
                        const minX = Math.min(0, diffX);
                        // 确保图片右边缘不会超出容器右边缘
                        const maxX = Math.max(0, -diffX);
                        translateX = Math.min(Math.max(newTranslateX, minX), maxX);
                    }
                    
                    if (scaledHeight <= containerRect.height) {
                        translateY = 0;
                    } else {
                        // 确保图片上边缘不会超出容器上边缘
                        const minY = Math.min(0, diffY);
                        // 确保图片下边缘不会超出容器下边缘
                        const maxY = Math.max(0, -diffY);
                        translateY = Math.min(Math.max(newTranslateY, minY), maxY);
                    }
                    
                    updateImageTransform();
                });
                
                document.addEventListener('mouseup', function() {
                    if (isDragging) {
                        isDragging = false;
                        img.style.cursor = 'grab';
                        correctPosition(); // 添加位置校正
                    }
                });
                
                // 绑定关闭事件
                closeBtn.onclick = (e) => {
                    e.stopPropagation();
                    viewer.remove();
                };
                
                viewer.onclick = (e) => {
                    if (e.target === viewer) {
                        viewer.remove();
                    }
                };
                
                // ESC键关闭
                const handleKeyDown = (e) => {
                    if (e.key === 'Escape') {
                        viewer.remove();
                        document.removeEventListener('keydown', handleKeyDown);
                    }
                };
                document.addEventListener('keydown', handleKeyDown);
                
                // 触发显示动画
                requestAnimationFrame(() => {
                    viewer.classList.add('show');
                });
            }
            
            // 添加点击事件监听器
            lightboxImg.removeEventListener('click', showDetailView);
            lightboxImg.addEventListener('click', showDetailView);
        }

        function updateLightboxImage() {
            const img = document.getElementById('lightbox-img');
            const counter = document.getElementById('image-counter');
            
            img.src = currentImages[currentImageIndex];
            counter.textContent = `${currentImageIndex + 1}/${currentImages.length}`;
        }

        function updateNavigationButtons() {
            const prevButton = document.getElementById('prev-image');
            const nextButton = document.getElementById('next-image');
            
            prevButton.disabled = currentImageIndex === 0;
            nextButton.disabled = currentImageIndex === currentImages.length - 1;
        }

        function changeImage(direction) {
            const newIndex = currentImageIndex + direction;
            const prevButton = document.getElementById('prev-image');
            const nextButton = document.getElementById('next-image');
            const img = document.getElementById('lightbox-img');
            
            if (newIndex < 0 || newIndex >= currentImages.length) {
                return;
            }
            
            // 添加退出动画类
            const exitClass = direction > 0 ? 'slide-left-exit' : 'slide-right-exit';
            img.classList.add(exitClass);
            
            setTimeout(() => {
                currentImageIndex = newIndex;
                // 更新导航按钮状态
                prevButton.disabled = currentImageIndex === 0;
                nextButton.disabled = currentImageIndex === currentImages.length - 1;
                
                // 更新视觉反馈
                prevButton.style.opacity = currentImageIndex === 0 ? '0.5' : '1';
                nextButton.style.opacity = currentImageIndex === currentImages.length - 1 ? '0.5' : '1';
                prevButton.style.cursor = currentImageIndex === 0 ? 'not-allowed' : 'pointer';
                nextButton.style.cursor = currentImageIndex === currentImages.length - 1 ? 'not-allowed' : 'pointer';
                
                // 添加进入动画类
                const enterClass = direction > 0 ? 'slide-left-enter' : 'slide-right-enter';
                img.classList.add(enterClass);
                img.classList.remove(exitClass);
                
                // 更新图片源
                img.src = currentImages[currentImageIndex];
                
                // 移除进入动画类
                setTimeout(() => {
                    img.classList.remove(enterClass);
                }, 50);
                
                updateCounter();
            }, 250);
        }

        function updateCounter() {
            const counter = document.getElementById('image-counter');
            counter.textContent = `${currentImageIndex + 1}/${currentImages.length}`;
        }

        function hideLightbox() {
            const img = document.getElementById('lightbox-img');
            img.classList.remove('enlarged'); // 移除放大状态
            
            const lightbox = document.getElementById('lightbox');
            lightbox.classList.remove('show');
            setTimeout(() => lightbox.style.display = 'none', 300);
        }

        window.onclick = function(event) {
            const updateModal = document.getElementById('updateModal');
            const thoughtsModal = document.getElementById('thoughts-modal');
            const progressModal = document.getElementById('progress-modal');
            
            if (event.target == updateModal) {
                closeUpdateModal();
            }
            if (event.target == thoughtsModal) {
                closeThoughtsModal();
            }
            if (event.target == progressModal) {
                closeProgressModal();
            }
        }

        // 添加音视频管理
        let currentPlayingMedia = null;

        // 添加音视频播放控制函数
        function handleMediaPlay(mediaElement) {
            // 如果有其他媒体正在播放且不是当前要播放的媒体
            if (currentPlayingMedia && currentPlayingMedia !== mediaElement) {
                // 暂停当前播放的媒体
                currentPlayingMedia.pause();
                
                // 如果是音乐，更新播放按钮图标
                if (currentPlayingMedia.id === 'bgMusic') {
                    const playBtn = document.getElementById('playBtn');
                    const icon = playBtn.querySelector('i');
                    icon.className = 'fas fa-play';
                }
            }
            
            // 更新当前播放的媒体
            currentPlayingMedia = mediaElement;
        }

        // 修改音乐播放函数
        function toggleMusic() {
            const music = document.getElementById('bgMusic');
            const playBtn = document.getElementById('playBtn');
            const icon = playBtn.querySelector('i');
            
            if (music.paused) {
                handleMediaPlay(music); // 添加这行
                music.play();
                icon.className = 'fas fa-pause';
            } else {
                music.pause();
                icon.className = 'fas fa-play';
                currentPlayingMedia = null; // 添加这行
            }
        }

        // 页面加载完成后为所有视频添加事件监听
        document.addEventListener('DOMContentLoaded', function() {
            // 为所有视频元素添加播放事件监听
            document.querySelectorAll('video').forEach(video => {
                video.addEventListener('play', function() {
                    handleMediaPlay(this);
                });
                
                video.addEventListener('pause', function() {
                    if (currentPlayingMedia === this) {
                        currentPlayingMedia = null;
                    }
                });
                
                video.addEventListener('ended', function() {
                    if (currentPlayingMedia === this) {
                        currentPlayingMedia = null;
                    }
                });
            });
            
            // 为背景音乐添加事件监听
            const bgMusic = document.getElementById('bgMusic');
            if (bgMusic) {
                bgMusic.addEventListener('ended', function() {
                    if (currentPlayingMedia === this) {
                        currentPlayingMedia = null;
                        const playBtn = document.getElementById('playBtn');
                        const icon = playBtn.querySelector('i');
                        icon.className = 'fas fa-play';
                    }
                });
            }
        });

        // 添加音乐进度更新功能
        document.getElementById('bgMusic').addEventListener('timeupdate', function() {
            const progress = document.getElementById('progress');
            const currentTime = document.getElementById('currentTime');
            const duration = document.getElementById('duration');
            
            // 更新进度条
            const percent = (this.currentTime / this.duration) * 100;
            progress.style.width = percent + '%';
            
            // 更新时间显示
            currentTime.textContent = formatTime(this.currentTime);
            duration.textContent = formatTime(this.duration);
        });

        // 格式化时间显示
        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            seconds = Math.floor(seconds % 60);
            return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        // 添加进度条点击功能
        document.querySelector('.progress-bar').addEventListener('click', function(e) {
            const music = document.getElementById('bgMusic');
            const percent = e.offsetX / this.offsetWidth;
            music.currentTime = percent * music.duration;
        });

        // 初始化
        setInterval(updateCurrentTime, 1000);
        setInterval(updateCountdown, 1000);
        showHome();

        let currentPage = 1;
        let nextClickCount = 0;
        let lastPageClickCount = 0;

        function showFloatingMessage(message) {
            const messageEl = document.createElement('div');
            messageEl.className = 'floating-message';
            messageEl.textContent = message;
            document.body.appendChild(messageEl);
            messageEl.style.display = 'block';

            // 获取所有现有消息（不包括新创建的消息）
            const existingMessages = Array.from(document.querySelectorAll('.floating-message')).slice(0, -1);
            
            // 计算每条消息的高度
            const messageHeight = messageEl.offsetHeight;

            // 新消息放在底部
            messageEl.style.bottom = '20px';

            // 从下往上依次堆叠现有消息
            existingMessages.reverse().forEach((msg, index) => {
                msg.style.bottom = `${20 + (index + 1) * messageHeight}px`;
            });

            // 3秒后移除消息
            setTimeout(() => {
                messageEl.remove();
                // 重新调整剩余消息的位置
                const remainingMessages = Array.from(document.querySelectorAll('.floating-message')).reverse();
                remainingMessages.forEach((msg, index) => {
                    msg.style.bottom = `${20 + index * messageHeight}px`;
                });
            }, 3000);
        }

        function changePage(direction) {
            if (direction === 'prev') {
                if (currentPage === 1) {
                    showFloatingMessage('已经是第一页啦');
                    return;
                }
                currentPage--;
            } else {
                if (currentPage === 3) {
                    if (document.getElementById('page4Btn').style.display === 'none') {
                        nextClickCount++;
                        handlePage3NextClick();
                        return;
                    }
                }
                if (currentPage === 4) {
                    lastPageClickCount++;
                    handleLastPageClick();
                    return;
                }
                const maxPage = document.getElementById('page4Btn').style.display === 'none' ? 3 : 4;
                if (currentPage < maxPage) {
                    currentPage++;
                }
            }
            updatePageDisplay();
        }

        function goToPage(page) {
            currentPage = page;
            updatePageDisplay();
            
            // 当切换到第四页时解锁成就
            if (page === 4) {
                unlockAchievement('hiddenPage');
            }
        }

        function updatePageDisplay() {
            // 隐藏所有内容
            document.querySelectorAll('.surprise-content').forEach(content => {
                content.style.display = 'none';
            });
            // 显示当前页内容
            document.getElementById(`surprise-content-${currentPage}`).style.display = 'block';
            
            // 当显示第四页时解锁成就
            if (currentPage === 4) {
                unlockAchievement('hiddenPage');
            }
        }

        function handlePage3NextClick() {
            const messages = [
                "已经是最后一页啦ヾ(❀^ω^)ﾉﾞ",
                "尊嘟是最后一页啦(✪ω✪)",
                "后面真的没有啦(灬°ω°灬) ",
                "不要再按啦￣へ￣",
                "真的是最后一页了，你怎么能不相信我o(╥﹏╥)o",
                "唔，你难道知道了些什么Σ(っ°Д°;)っ",
                "不会吧，不可能不可能，你怎么会知道的(;≧Д≦)y",
                "你……你一定要逼我吗，还是你……真的知道了 o(TωT)o ",
                "那好吧…看样子你真的知道了，那那那我就摊牌了┐(・o・)┌ 其实还有第四页，那就给你看看吧，虽然没什么好看的╮(・o・)╭"
            ];

            if (nextClickCount <= messages.length) {
                showFloatingMessage(messages[nextClickCount - 1]);
            }

            if (nextClickCount === 9) {
                const page4Btn = document.getElementById('page4Btn');
                page4Btn.style.display = 'inline-block';
                unlockAchievement('hiddenPage'); // 在这里添加成就解锁
            }
        }

        function handleLastPageClick() {
            if (lastPageClickCount <= 25) {
                showFloatingMessage("已经是最后一页啦");
            } else if (lastPageClickCount === 26) {
                showFloatingMessage("我是有底线的");
                unlockAchievement('bottomLine');
            } else if (lastPageClickCount === 52) {
                showFloatingMessage("好吧，开发者让我转交给你一个东西，mua~");
                unlockAchievement('developerGift');
            } else if (lastPageClickCount >= 53 && lastPageClickCount <= 103) {
                const messages = [
                    "mua! (*╯3╰)",
                    "ღ( ´･ᴗ･` )比心",
                    "♥(๑> ₃ <)♥"
                ];
                showFloatingMessage(messages[Math.floor(Math.random() * messages.length)]);
            } else if (lastPageClickCount === 104) {
                showFloatingMessage("唔哇，你不累吗？");
            } else if (lastPageClickCount === 105) {
                showFloatingMessage("唔，好吧，我累了，你自己玩吧");
                unlockAchievement('tiredSystem');
            } else {
                showFloatingMessage("已经是最后一页啦");
            }
        }

        // 初始化显示第一页
        updatePageDisplay();

        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('overlay');
            if (sidebar.style.left === '0px') {
                sidebar.style.left = '-250px';
                overlay.style.display = 'none';
            } else {
                sidebar.style.left = '0px';
                overlay.style.display = 'block';
            }
        }

        function showUpdateNotice() {
            const menuBtn = document.querySelector('.menu-btn');
            menuBtn.classList.add('hidden');
            const modal = document.getElementById('updateModal');
            if (modal) {
                modal.style.display = 'block';
                handleUpdateModalScroll();
                setTimeout(() => {
                    modal.classList.add('show');
                }, 10);
            }
        }

        function handleUpdateModalScroll() {
            const modalBody = document.querySelector('.update-modal-body');
            
            modalBody.addEventListener('wheel', function(event) {
                const scrollTop = this.scrollTop;
                const scrollHeight = this.scrollHeight;
                const height = this.clientHeight;
                
                // 当滚动到顶部或底部时阻止事件传递
                if (
                    (scrollTop === 0 && event.deltaY < 0) || // 到达顶部且继续向上滚动
                    (scrollTop + height >= scrollHeight && event.deltaY > 0) // 到达底部且继续向下滚动
                ) {
                    event.preventDefault();
                }
            });
        }

        function closeUpdateModal() {
            const menuBtn = document.querySelector('.menu-btn');
            menuBtn.classList.remove('hidden');
            const modal = document.getElementById('updateModal');
            if (modal) {
                modal.classList.remove('show');
                setTimeout(() => {
                    modal.style.display = 'none';
                }, 300);
            }
        }

        function showWaitingMessage() {
            showFloatingMessage('等待更新中，敬请期待');
        }

        function closeThoughtsModal() {
            const menuBtn = document.querySelector('.menu-btn');
            menuBtn.classList.remove('hidden');
            const modal = document.getElementById('thoughts-modal');
            if (modal) {
                modal.classList.remove('show');
                setTimeout(() => {
                    modal.style.display = 'none';
                }, 300);
            }
        }

        function handleThoughtsModalScroll() {
            const modalContent = document.querySelector('.modal-content > div');
            
            modalContent.addEventListener('wheel', function(event) {
                const scrollTop = this.scrollTop;
                const scrollHeight = this.scrollHeight;
                const height = this.clientHeight;
                
                // 当滚动到顶部或底部时阻止事件传递
                if (
                    (scrollTop === 0 && event.deltaY < 0) || // 到达顶部且继续向上滚动
                    (scrollTop + height >= scrollHeight && event.deltaY > 0) // 到达底部且继续向下滚动
                ) {
                    event.preventDefault();
                }
            });
        }

        // 成就系统
        const achievements = {
            hiddenPage: {
                id: 'hiddenPage',
                name: '隐藏的页面',
                description: '发现隐藏的第四页',
                unlocked: false
            },
            bottomLine: {
                id: 'bottomLine',
                name: '有底线的系统',
                description: '在第四页点击了26次下一页',
                unlocked: false
            },
            developerGift: {
                id: 'developerGift',
                name: '开发者的馈赠',
                description: '在第四页点击了52次下一页',
                unlocked: false
            },
            tiredSystem: {
                id: 'tiredSystem',
                name: '疲劳的系统',
                description: '在第四页点击了105次下一页',
                unlocked: false
            }
        };

        // 显示进度窗口
        function showProgress() {
            const menuBtn = document.querySelector('.menu-btn');
            menuBtn.classList.add('hidden');
            const modal = document.getElementById('progress-modal');
            if (modal) {
                modal.style.display = 'block';
                updateProgressDisplay();
                setTimeout(() => {
                    modal.classList.add('show');
                }, 10);
            }
        }

        // 关闭进度窗口
        function closeProgressModal() {
            const menuBtn = document.querySelector('.menu-btn');
            menuBtn.classList.remove('hidden');
            const modal = document.getElementById('progress-modal');
            if (modal) {
                modal.classList.remove('show');
                setTimeout(() => {
                    modal.style.display = 'none';
                }, 300);
            }
        }

        // 更新进度显示
        function updateProgressDisplay() {
            const unlockedCount = Object.values(achievements).filter(a => a.unlocked).length;
            const totalCount = Object.keys(achievements).length;
            
            document.getElementById('unlocked-count').textContent = unlockedCount;
            document.getElementById('total-count').textContent = totalCount;
            
            const progressBar = document.getElementById('achievements-progress');
            if (progressBar) {
                progressBar.style.width = `${(unlockedCount / totalCount) * 100}%`;
            }
            
            updateAchievementsList();
        }

        // 更新成就列表
        function updateAchievementsList() {
            const container = document.getElementById('achievements-list');
            if (container) {
                container.innerHTML = '';
                
                Object.values(achievements).forEach(achievement => {
                    if (achievement.unlocked) {
                        const item = document.createElement('div');
                        item.className = 'achievement-item';
                        item.innerHTML = `
                            <i class="fas fa-trophy"></i>
                            <div>
                                <div><strong>${achievement.name}</strong></div>
                                <div>${achievement.description}</div>
                            </div>
                        `;
                        container.appendChild(item);
                    }
                });
            }
        }

        // 解锁成就
        function unlockAchievement(achievementId) {
            const achievement = achievements[achievementId];
            if (achievement && !achievement.unlocked) {
                achievement.unlocked = true;
                showFloatingMessage(`已解锁成就：${achievement.name}`, 'achievement');
                updateProgressDisplay();
            }
        }

        // 修改现有的 showFloatingMessage 函数
        function showFloatingMessage(message, type = 'normal') {
            const messageEl = document.createElement('div');
            messageEl.className = type === 'achievement' ? 
                'floating-message achievement-unlock-message' : 
                'floating-message';
            messageEl.textContent = message;
            document.body.appendChild(messageEl);
            messageEl.style.display = 'block';

            // 获取所有现有消息（不包括新创建的消息）
            const existingMessages = Array.from(document.querySelectorAll('.floating-message')).slice(0, -1);
            
            // 计算每条消息的高度
            const messageHeight = messageEl.offsetHeight;

            // 新消息放在底部
            messageEl.style.bottom = '20px';

            // 从下往上依次堆叠现有消息
            existingMessages.reverse().forEach((msg, index) => {
                msg.style.bottom = `${20 + (index + 1) * messageHeight}px`;
            });

            // 3秒后移除消息
            setTimeout(() => {
                messageEl.remove();
                // 重新调整剩余消息的位置
                const remainingMessages = Array.from(document.querySelectorAll('.floating-message')).reverse();
                remainingMessages.forEach((msg, index) => {
                    msg.style.bottom = `${20 + index * messageHeight}px`;
                });
            }, 3000);
        }

        // 添加全屏查看相关函数
        function showFullscreenImage(imgSrc) {
            // 创建全屏查看容器
            const fullscreenView = document.createElement('div');
            fullscreenView.className = 'fullscreen-image-view';
            
            // 创建图片容器
            const imageContainer = document.createElement('div');
            imageContainer.className = 'fullscreen-image-container';
            
            // 创建图片元素
            const img = document.createElement('img');
            img.src = imgSrc;
            img.className = 'fullscreen-image';
            
            // 创建关闭按钮
            const closeBtn = document.createElement('span');
            closeBtn.className = 'fullscreen-close';
            closeBtn.innerHTML = '&times;';
            
            // 创建控制按钮容器
            const controls = document.createElement('div');
            controls.className = 'fullscreen-controls';
            
            // 创建缩放级别显示
            const zoomLevel = document.createElement('span');
            zoomLevel.className = 'zoom-level';
            zoomLevel.textContent = '100%';
            
            // 创建放大按钮
            const zoomInBtn = document.createElement('button');
            zoomInBtn.className = 'fullscreen-btn';
            zoomInBtn.innerHTML = '<i class="fas fa-search-plus"></i> 放大';
            
            // 创建缩小按钮
            const zoomOutBtn = document.createElement('button');
            zoomOutBtn.className = 'fullscreen-btn';
            zoomOutBtn.innerHTML = '<i class="fas fa-search-minus"></i> 缩小';
            
            // 创建重置按钮
            const resetBtn = document.createElement('button');
            resetBtn.className = 'fullscreen-btn';
            resetBtn.innerHTML = '<i class="fas fa-undo"></i> 重置';
            
            // 组装控制按钮
            controls.appendChild(zoomOutBtn);
            controls.appendChild(zoomLevel);
            controls.appendChild(zoomInBtn);
            controls.appendChild(resetBtn);
            
            // 组装页面元素
            imageContainer.appendChild(img);
            fullscreenView.appendChild(closeBtn);
            fullscreenView.appendChild(imageContainer);
            fullscreenView.appendChild(controls);
            
            // 添加到页面并显示
            document.body.appendChild(fullscreenView);
            
            // 触发动画
            requestAnimationFrame(() => {
                fullscreenView.style.display = 'flex';
                requestAnimationFrame(() => {
                    fullscreenView.classList.add('show');
                    imageContainer.classList.add('show');
                    controls.classList.add('show');
                    closeBtn.classList.add('show');
                });
            });

            // 添加拖动相关变量
            let isDragging = false;
            let currentX;
            let currentY;
            let initialX;
            let initialY;
            let xOffset = 0;
            let yOffset = 0;
            let currentScale = 1;

            // 更新setTransform函数
            function setTransform(element, x, y, scale = null) {
                if (scale !== null) {
                    currentScale = scale;
                }
                
                // 获取容器和图片的尺寸
                const containerRect = imageContainer.getBoundingClientRect();
                const imgRect = element.getBoundingClientRect();
                
                // 计算缩放后的图片尺寸
                const scaledWidth = imgRect.width / currentScale;
                const scaledHeight = imgRect.height / currentScale;
                
                // 计算可移动的最大范围
                const maxX = Math.max(0, (scaledWidth * currentScale - containerRect.width) / 2);
                const maxY = Math.max(0, (scaledHeight * currentScale - containerRect.height) / 2);
                
                // 限制移动范围
                if (currentScale <= 1) {
                    x = 0;
                    y = 0;
                } else {
                    // 确保图片不会移出容器边界
                    x = Math.min(Math.max(x, -maxX), maxX);
                    y = Math.min(Math.max(y, -maxY), maxY);
                }
                
                xOffset = x;
                yOffset = y;
                
                element.style.transform = `translate3d(${x}px, ${y}px, 0) scale(${currentScale})`;
            }

            // 更新按钮事件处理
            zoomInBtn.onclick = () => {
                if (currentScale < 2) {
                    currentScale = Math.min(currentScale + 0.2, 2);
                    setTransform(img, xOffset, yOffset, currentScale);
                    zoomLevel.textContent = `${Math.round(currentScale * 100)}%`;
                }
            };
            
            zoomOutBtn.onclick = () => {
                if (currentScale > 0.4) {
                    currentScale = Math.max(currentScale - 0.2, 0.4);
                    setTransform(img, xOffset, yOffset, currentScale);
                    zoomLevel.textContent = `${Math.round(currentScale * 100)}%`;
                }
            };
            
            resetBtn.onclick = () => {
                currentScale = 1;
                xOffset = 0;
                yOffset = 0;
                setTransform(img, 0, 0, 1);
                zoomLevel.textContent = '100%';
            };
            
            closeBtn.onclick = () => {
                // 移除所有事件监听器
                document.removeEventListener('mousemove', drag);
                document.removeEventListener('mouseup', dragEnd);
                fullscreenView.removeEventListener('wheel', handleWheel);
                
                // 移除动画类
                fullscreenView.classList.remove('show');
                imageContainer.classList.remove('show');
                controls.classList.remove('show');
                closeBtn.classList.remove('show');
                
                // 禁用所有交互
                img.style.pointerEvents = 'none';
                closeBtn.style.pointerEvents = 'none';
                controls.style.pointerEvents = 'none';
                
                // 等待动画完成后移除元素
                setTimeout(() => {
                    if (document.body.contains(fullscreenView)) {
                        document.body.removeChild(fullscreenView);
                    }
                }, 300);
            };

            // 添加拖动事件处理
            function drag(e) {
                if (isDragging) {
                    e.preventDefault();
                    const dx = e.clientX - initialX;
                    const dy = e.clientY - initialY;
                    
                    currentX = xOffset + dx;
                    currentY = yOffset + dy;
                    
                    setTransform(img, currentX, currentY);
                }
            }

            function dragEnd(e) {
                if (isDragging) {
                    e.preventDefault();
                    initialX = currentX;
                    initialY = currentY;
                    isDragging = false;
                    img.classList.remove('dragging');
                }
            }

            img.addEventListener('mousedown', (e) => {
                e.preventDefault();
                isDragging = true;
                initialX = e.clientX - xOffset;
                initialY = e.clientY - yOffset;
                img.classList.add('dragging');
            });

            document.addEventListener('mousemove', drag);
            document.addEventListener('mouseup', dragEnd);

            // 将滚轮事件处理函数单独定义，以便移除
            function handleWheel(e) {
                e.preventDefault();
                if (currentScale > 1) {
                    const scrollAmount = e.deltaY * 0.5;
                    const newY = yOffset + scrollAmount;
                    setTransform(img, xOffset, newY);
                }
            }

            // 添加滚轮事件
            fullscreenView.addEventListener('wheel', handleWheel, { passive: false });
        }

        // 修改视频控件创建函数
        function createVideoControls(container, video) {
            // 移除默认控件
            video.controls = false;
            
            const controls = document.createElement('div');
            controls.className = 'video-controls';
            
            // 播放/暂停按钮
            const playBtn = document.createElement('button');
            playBtn.className = 'play-btn';
            playBtn.innerHTML = '<i class="fas fa-play"></i>';
            
            // 进度条
            const progressBar = document.createElement('div');
            progressBar.className = 'progress-bar';
            const progress = document.createElement('div');
            progress.className = 'progress';
            progressBar.appendChild(progress);
            
            // 时间显示
            const timeDisplay = document.createElement('div');
            timeDisplay.className = 'time-display';
            
            // 音量控制
            const volumeControl = document.createElement('div');
            volumeControl.className = 'volume-control';
            const volumeBtn = document.createElement('button');
            volumeBtn.className = 'volume-btn';
            volumeBtn.innerHTML = '<i class="fas fa-volume-up"></i>';
            const volumeSlider = document.createElement('input');
            volumeSlider.type = 'range';
            volumeSlider.className = 'volume-slider';
            volumeSlider.min = '0';
            volumeSlider.max = '1';
            volumeSlider.step = '0.1';
            volumeSlider.value = '1';
            
            // 倍速控制
            const rateBtn = document.createElement('button');
            rateBtn.className = 'playback-rate-btn';
            rateBtn.textContent = '1.0x';
            
            const rateMenu = document.createElement('div');
            rateMenu.className = 'playback-rate-menu';
            
            const rates = [0.5, 1.0, 1.5, 2.0, 2.5, 3.0];
            
            rates.forEach(rate => {
                const option = document.createElement('div');
                option.className = 'rate-option';
                option.textContent = `${rate}x`;
                if (rate === 1.0) option.classList.add('active');
                
                option.addEventListener('click', function(e) {
                    e.stopPropagation();
                    video.playbackRate = rate;
                    rateBtn.textContent = `${rate}x`;
                    
                    // 更新选中状态
                    rateMenu.querySelectorAll('.rate-option').forEach(opt => {
                        opt.classList.remove('active');
                    });
                    this.classList.add('active');
                    
                    // 隐藏菜单
                    rateMenu.style.display = 'none';
                });
                
                rateMenu.appendChild(option);
            });
            
            // 倍速按钮点击事件
            rateBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                // 切换菜单显示状态
                rateMenu.style.display = rateMenu.style.display === 'none' ? 'block' : 'none';
            });
            
            // 点击其他地方关闭菜单
            document.addEventListener('click', function() {
                rateMenu.style.display = 'none';
            });
            
            // 添加倍速控件样式
            const style = document.createElement('style');
            style.textContent = `
                .playback-rate-menu {
                    position: absolute;
                    bottom: 40px;
                    right: 10px;
                    background: rgba(0, 0, 0, 0.9);
                    border-radius: 4px;
                    padding: 5px 0;
                    display: none;
                    z-index: 1000;
                }
                
                .rate-option {
                    color: white;
                    padding: 5px 15px;
                    cursor: pointer;
                    transition: background 0.2s;
                }
                
                .rate-option:hover {
                    background: rgba(255, 255, 255, 0.2);
                }
                
                .rate-option.active {
                    background: rgba(255, 255, 255, 0.3);
                }
            `;
            document.head.appendChild(style);
            
            // 将倍速控件添加到控制栏
            controls.appendChild(rateBtn);
            controls.appendChild(rateMenu);
            
            // 组装控件
            volumeControl.appendChild(volumeBtn);
            volumeControl.appendChild(volumeSlider);
            
            controls.appendChild(playBtn);
            controls.appendChild(progressBar);
            controls.appendChild(timeDisplay);
            controls.appendChild(volumeControl);
            
            container.appendChild(controls);
            
            // ... 添加事件处理代码 ...

            // 添加事件处理
            playBtn.onclick = () => {
                if (video.paused) {
                    handleMediaPlay(video);
                    video.play();
                    playBtn.innerHTML = '<i class="fas fa-pause"></i>';
                } else {
                    video.pause();
                    playBtn.innerHTML = '<i class="fas fa-play"></i>';
                    currentPlayingMedia = null;
                }
            };

            // 添加视频结束事件监听
            video.addEventListener('ended', () => {
                video.currentTime = 0; // 重置视频到开始位置
                playBtn.innerHTML = '<i class="fas fa-play"></i>'; // 重置按钮为播放图标
                currentPlayingMedia = null;
            });

            // 添加视频加载完成事件监听
            video.addEventListener('loadedmetadata', () => {
                // 更新总时长显示
                const duration = formatTime(video.duration);
                timeDisplay.textContent = `0:00 / ${duration}`;
            });

            // 添加视频播放状态变化监听
            video.addEventListener('play', () => {
                playBtn.innerHTML = '<i class="fas fa-pause"></i>';
            });

            video.addEventListener('pause', () => {
                playBtn.innerHTML = '<i class="fas fa-play"></i>';
            });

            // 进度条事件
            progressBar.onclick = (e) => {
                const rect = progressBar.getBoundingClientRect();
                const pos = (e.clientX - rect.left) / rect.width;
                video.currentTime = pos * video.duration;
            };

            // 更新进度条和时间显示
            video.addEventListener('timeupdate', () => {
                const currentTime = formatTime(video.currentTime);
                const duration = formatTime(video.duration);
                timeDisplay.textContent = `${currentTime} / ${duration}`;
                progress.style.width = `${(video.currentTime / video.duration) * 100}%`;
            });

            // 音量控制
            volumeBtn.onclick = () => {
                if (video.volume > 0) {
                    video.volume = 0;
                    volumeBtn.innerHTML = '<i class="fas fa-volume-mute"></i>';
                    volumeSlider.value = 0;
                } else {
                    video.volume = 1;
                    volumeBtn.innerHTML = '<i class="fas fa-volume-up"></i>';
                    volumeSlider.value = 1;
                }
            };

            volumeSlider.oninput = (e) => {
                video.volume = e.target.value;
                volumeBtn.innerHTML = video.volume === 0 ? 
                    '<i class="fas fa-volume-mute"></i>' : 
                    '<i class="fas fa-volume-up"></i>';
            };

            // 创建全屏按钮
            const fullscreenBtn = document.createElement('button');
            fullscreenBtn.className = 'fullscreen-btn';
            fullscreenBtn.innerHTML = '<i class="fas fa-expand"></i>';

            // 全屏按钮事件
            fullscreenBtn.onclick = () => {
                if (document.fullscreenElement) {
                    document.exitFullscreen();
                    fullscreenBtn.innerHTML = '<i class="fas fa-expand"></i>';
                } else {
                    container.requestFullscreen();
                    fullscreenBtn.innerHTML = '<i class="fas fa-compress"></i>';
                }
            };

            // 按照新的顺序组装控件
            controls.appendChild(playBtn);
            controls.appendChild(progressBar);
            controls.appendChild(timeDisplay);
            controls.appendChild(volumeControl);
            controls.appendChild(rateBtn);
            controls.appendChild(rateMenu);
            controls.appendChild(fullscreenBtn);
        }

        // 格式化时间函数
        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            seconds = Math.floor(seconds % 60);
            return `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
        }

        // 初始化所有视频
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.video-container').forEach(container => {
                const video = container.querySelector('video');
                if (video) {
                    createVideoControls(container, video);
                }
            });
        });

        // 音乐播放器控制
        function initMusicPlayer() {
            const music = document.getElementById('bgMusic');
            const playBtn = document.getElementById('playBtn');
            const progressBar = document.getElementById('musicProgress');
            const volumeControl = document.getElementById('volumeControl');
            
            if (!music || !playBtn || !progressBar || !volumeControl) return;
            
            // 更新进度条
            music.addEventListener('timeupdate', () => {
                const progress = (music.currentTime / music.duration) * 100;
                progressBar.style.width = `${progress}%`;
            });
            
            // 点击进度条跳转
            progressBar.parentElement.addEventListener('click', (e) => {
                const rect = progressBar.parentElement.getBoundingClientRect();
                const pos = (e.clientX - rect.left) / rect.width;
                music.currentTime = pos * music.duration;
            });
            
            // 音量控制
            volumeControl.addEventListener('input', (e) => {
                music.volume = e.target.value;
            });
        }

        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', () => {
            initMusicPlayer();
        });

        // 添加位置校正函数
        function correctPosition() {
            const containerRect = imgContainer.getBoundingClientRect();
            const imgRect = img.getBoundingClientRect();
            
            // 计算图片的实际尺寸（考虑缩放）
            const scaledWidth = imgRect.width * currentScale;
            const scaledHeight = imgRect.height * currentScale;
            
            // 计算容器和图片的尺寸差
            const diffX = containerRect.width - scaledWidth;
            const diffY = containerRect.height - scaledHeight;
            
            // 校正X轴位置
            if (scaledWidth <= containerRect.width) {
                translateX = 0;
            } else {
                const minX = Math.min(0, diffX);
                const maxX = Math.max(0, -diffX);
                translateX = Math.min(Math.max(translateX, minX), maxX);
            }
            
            // 校正Y轴位置
            if (scaledHeight <= containerRect.height) {
                translateY = 0;
            } else {
                const minY = Math.min(0, diffY);
                const maxY = Math.max(0, -diffY);
                translateY = Math.min(Math.max(translateY, minY), maxY);
            }
            
            updateImageTransform();
        }

        // 修改鼠标抬起事件
        document.addEventListener('mouseup', function() {
            if (isDragging) {
                isDragging = false;
                img.style.cursor = 'grab';
                correctPosition(); // 添加位置校正
            }
        });

        // 修改缩放函数
        function updateScale(newScale) {
            const oldScale = currentScale;
            currentScale = Math.min(Math.max(newScale, SCALE_LIMITS.min), SCALE_LIMITS.max);
            
            // 调整位移以保持图片在视图中心
            translateX = translateX * (currentScale / oldScale);
            translateY = translateY * (currentScale / oldScale);
            
            correctPosition(); // 添加位置校正
            zoomLevel.innerHTML = `${Math.round(currentScale * 100)}%`;
        }

        // 修改重置函数
        resetZoom.onclick = (e) => {
            e.stopPropagation();
            currentScale = 1;
            translateX = 0;
            translateY = 0;
            correctPosition(); // 添加位置校正
            zoomLevel.innerHTML = '100%';
        };

        // 添加窗口大小改变时的处理
        window.addEventListener('resize', function() {
            if (document.querySelector('.fullscreen-image-view')) {
                correctPosition();
            }
        });

        // 添加图片加载完成时的处理
        img.addEventListener('load', function() {
            correctPosition();
        });

        // 检查当前显示的是哪个页面
        function getCurrentPage() {
            if (document.getElementById('home-page').style.display !== 'none') {
                return 'home';
            } else if (document.getElementById('timeline-page').style.display !== 'none') {
                return 'timeline';
            } else if (document.getElementById('surprise-page').style.display !== 'none') {
                return 'surprise';
            }
            return 'home'; // 默认返回首页
        }

        // 更新倒计时的显示/隐藏状态
        function updateCountdownVisibility() {
            const countdownWrapper = document.querySelector('.countdown-wrapper');
            if (!countdownWrapper) return;
            
            const currentPage = getCurrentPage();
            countdownWrapper.style.display = currentPage === 'home' ? 'block' : 'none';
        }

        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', function() {
            updateCountdownVisibility();
            // 其他初始化代码...
        });

        // 全局变量声明
        let isDragging = false;
        let currentScale = 1;
        let translateX = 0;
        let translateY = 0;
        let startX = 0;
        let startY = 0;
        let img = null;
        let zoomLevel = null;

        // 初始化函数
        function initializeVariables() {
            img = document.querySelector('.fullscreen-image');
            zoomLevel = document.querySelector('.zoom-level');
        }

        // 重置缩放函数
        function resetZoom() {
            currentScale = 1;
            translateX = 0;
            translateY = 0;
            
            const img = document.querySelector('.fullscreen-image');
            if (img) {
                img.style.transform = `scale(${currentScale}) translate(${translateX}px, ${translateY}px)`;
            }
            
            const zoomLevel = document.querySelector('.zoom-level');
            if (zoomLevel) {
                zoomLevel.innerHTML = '100%';
            }
        }

        // 更新图片变换
        function updateImageTransform() {
            if (img) {
                img.style.transform = `scale(${currentScale}) translate(${translateX/currentScale}px, ${translateY/currentScale}px)`;
            }
        }

        // 检查当前显示的是哪个页面
        function getCurrentPage() {
            if (document.getElementById('home-page').style.display !== 'none') {
                return 'home';
            } else if (document.getElementById('timeline-page').style.display !== 'none') {
                return 'timeline';
            } else if (document.getElementById('surprise-page').style.display !== 'none') {
                return 'surprise';
            }
            return 'home';
        }

        // 更新倒计时的显示/隐藏状态
        function updateCountdownVisibility() {
            const countdownWrapper = document.querySelector('.countdown-wrapper');
            if (!countdownWrapper) return;
            
            const currentPage = getCurrentPage();
            countdownWrapper.style.display = currentPage === 'home' ? 'block' : 'none';
        }

        // 图片拖拽相关函数
        function startDragging(e) {
            isDragging = true;
            startX = e.clientX - translateX;
            startY = e.clientY - translateY;
            if (e.target) {
                e.target.style.cursor = 'grabbing';
            }
            e.preventDefault();
        }

        function stopDragging(e) {
            if (!isDragging) return;
            isDragging = false;
            if (e.target) {
                e.target.style.cursor = 'grab';
            }
        }

        function handleDragging(e) {
            if (!isDragging) return;
            translateX = e.clientX - startX;
            translateY = e.clientY - startY;
            updateImageTransform();
        }

        // 页面切换函数
        function showHome() {
            document.getElementById('home-page').style.display = 'block';
            document.getElementById('timeline-page').style.display = 'none';
            document.getElementById('surprise-page').style.display = 'none';
            updateCountdownVisibility();
        }

        function showTimeline() {
            document.getElementById('home-page').style.display = 'none';
            document.getElementById('timeline-page').style.display = 'block';
            document.getElementById('surprise-page').style.display = 'none';
            updateCountdownVisibility();
        }

        function showSurprise() {
            document.getElementById('home-page').style.display = 'none';
            document.getElementById('timeline-page').style.display = 'none';
            document.getElementById('surprise-page').style.display = 'block';
            updateCountdownVisibility();
        }

        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化所有变量
            initializeVariables();
            
            // 更新倒计时显示
            updateCountdownVisibility();
            
            // 添加拖拽事件监听
            if (img) {
                img.addEventListener('mousedown', startDragging);
                document.addEventListener('mousemove', handleDragging);
                document.addEventListener('mouseup', stopDragging);
            }
        });

        // 图片相关操作函数
        function handleImage() {
            const img = document.querySelector('.fullscreen-image');
            if (!img) return;

            // 添加双击重置功能
            img.addEventListener('dblclick', resetZoom);

            // ... 其他图片操作代码保持不变 ...
        }

        // 立即执行函数，创建独立的作用域
        (function() {
            // 1. 首先声明所有全局变量
            let isDragging = false;
            let currentScale = 1;
            let translateX = 0;
            let translateY = 0;
            let startX = 0;
            let startY = 0;

            // 2. 工具函数
            function updateImageTransform(img) {
                if (!img) return;
                img.style.transform = `scale(${currentScale}) translate(${translateX/currentScale}px, ${translateY/currentScale}px)`;
            }

            // 3. 重置缩放函数
            function resetZoom(img, zoomLevel) {
                currentScale = 1;
                translateX = 0;
                translateY = 0;
                updateImageTransform(img);
                if (zoomLevel) {
                    zoomLevel.innerHTML = '100%';
                }
            }

            // 4. 拖拽相关函数
            function startDragging(e, img) {
                isDragging = true;
                startX = e.clientX - translateX;
                startY = e.clientY - translateY;
                if (img) {
                    img.style.cursor = 'grabbing';
                }
                e.preventDefault();
            }

            function stopDragging(img) {
                isDragging = false;
                if (img) {
                    img.style.cursor = 'grab';
                }
            }

            function handleDragging(e, img) {
                if (!isDragging) return;
                translateX = e.clientX - startX;
                translateY = e.clientY - startY;
                updateImageTransform(img);
            }

            // 5. 页面切换函数
            function showHome() {
                document.getElementById('home-page').style.display = 'block';
                document.getElementById('timeline-page').style.display = 'none';
                document.getElementById('surprise-page').style.display = 'none';
                updateCountdownVisibility();
            }

            function showTimeline() {
                document.getElementById('home-page').style.display = 'none';
                document.getElementById('timeline-page').style.display = 'block';
                document.getElementById('surprise-page').style.display = 'none';
                updateCountdownVisibility();
            }

            function showSurprise() {
                document.getElementById('home-page').style.display = 'none';
                document.getElementById('timeline-page').style.display = 'none';
                document.getElementById('surprise-page').style.display = 'block';
                updateCountdownVisibility();
            }

            // 6. 倒计时相关函数
            function updateCountdownVisibility() {
                const countdownWrapper = document.querySelector('.countdown-wrapper');
                if (!countdownWrapper) return;
                
                const isHome = document.getElementById('home-page').style.display !== 'none';
                countdownWrapper.style.display = isHome ? 'block' : 'none';
            }

            // 7. 初始化函数
            function initializeImage() {
                const img = document.querySelector('.fullscreen-image');
                const zoomLevel = document.querySelector('.zoom-level');
                
                if (!img) return;

                // 添加事件监听器
                img.addEventListener('mousedown', (e) => startDragging(e, img));
                document.addEventListener('mousemove', (e) => handleDragging(e, img));
                document.addEventListener('mouseup', () => stopDragging(img));
                img.addEventListener('dblclick', () => resetZoom(img, zoomLevel));
            }

            // 8. 页面加载完成后的初始化
            document.addEventListener('DOMContentLoaded', function() {
                initializeImage();
                updateCountdownVisibility();
                
                // 将函数暴露到全局作用域（如果需要）
                window.showHome = showHome;
                window.showTimeline = showTimeline;
                window.showSurprise = showSurprise;
            });
        })();

        // 添加样式
        const style = document.createElement('style');
        style.textContent = `
            .birthday-message {
                background: linear-gradient(45deg, #ff69b4, #ff1493, #ff69b4);
                color: white;
                font-size: 1.5em;
                font-weight: bold;
                padding: 10px 20px;
                border-radius: 15px;
                text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
                display: inline-block;
                animation: pulse 2s ease-in-out infinite;
            }

            @keyframes pulse {
                0% { transform: scale(1); }
                25% { transform: scale(1.2); }
                50% { transform: scale(1); }
                75% { transform: scale(0.8); }
                100% { transform: scale(1); }
            }

            .countdown-number {
                font-weight: bold;
                color: #ff1493;
            }

            .countdown-unit {
                margin-right: 10px;
            }

            .countdown-text {
                font-size: 1.2em;
                text-align: center;
            }
        `;
        document.head.appendChild(style);

        // 更新倒计时的函数
        function updateCountdown() {
            const countdownText = document.querySelector('.countdown-text');
            if (!countdownText) return;

            const now = new Date();
            const targetDate = getNextBirthday();
            
            // 如果是生日当天
            if (isBirthdayPeriod(now, targetDate)) {
                countdownText.innerHTML = `
                    <span class="birthday-message">今天是你的生日，祝我的小呆瓜生日快乐🎂✨<br>天天开心，身体健康，万事如意，心想事成<br>我永远爱你💖💘！</span>
                `;
                return;
            }

            const diff = targetDate - now;
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);

            countdownText.innerHTML = `
                距离柳儿生日还有
                <span class="countdown-number">${days}</span><span class="countdown-unit">天</span>
                <span class="countdown-number">${padZero(hours)}</span><span class="countdown-unit">小时</span>
                <span class="countdown-number">${padZero(minutes)}</span><span class="countdown-unit">分钟</span>
                <span class="countdown-number">${padZero(seconds)}</span><span class="countdown-unit">秒</span>
            `;
        }

        // 页面加载完成后启动倒计时
        document.addEventListener('DOMContentLoaded', function() {
            updateCountdown();
            setInterval(updateCountdown, 1000);
        });
    </script>
</body>
</html>
