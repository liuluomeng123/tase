<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>柳儿生辰</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "Microsoft YaHei", sans-serif;
            background-color: #f0f2f5;
            color: #333;
            line-height: 1.6;
        }

        /* 首页装饰图片样式 */
        .home-decoration {
            position: fixed;
            width: 200px;
            height: auto;
            z-index: -1;
        }

        .home-decoration.left-top {
            left: 20px;
            top: 100px;
        }

        .home-decoration.left-bottom {
            left: 20px;
            bottom: 100px;
        }

        .home-decoration.right-top {
            right: 20px;
            top: 100px;
        }

        .home-decoration.right-bottom {
            right: 20px;
            bottom: 100px;
        }

        /* 顶部时间组件 */
        #current-time {
            position: fixed;
            top: 10px;
            right: 20px;
            font-size: 16px;
            background: rgba(255, 255, 255, 0.9);
            padding: 8px 15px;
            border-radius: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        /* 导航按钮 */
        .nav-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 50px auto;
            max-width: 800px;
            flex-wrap: wrap;
        }

        .nav-btn {
            padding: 12px 25px;
            font-size: 18px;
            cursor: pointer;
            border: none;
            border-radius: 25px;
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            transition: all 0.3s ease;
            box-shadow: 0 3px 6px rgba(0,0,0,0.1);
        }

        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        /* 倒计时区域 */
        .countdown {
            text-align: center;
            margin: 50px auto;
            font-size: 28px;
            font-weight: bold;
            color: #2c3e50;
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            max-width: 800px;
        }

        /* 弹窗样式 */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0);
            z-index: 1002;
            transition: background-color 0.3s ease;
        }

        .modal.show {
            background-color: rgba(0, 0, 0, 0.5);
        }

        .modal-content {
            position: relative;
            margin: 5% auto;
            width: 80%;
            max-width: 600px;
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transform: scale(0.7);
            opacity: 0;
            transition: all 0.3s ease;
        }

        .modal.show .modal-content {
            transform: scale(1);
            opacity: 1;
        }

        @keyframes modalFade {
            from {opacity: 0; transform: translateY(-20px);}
            to {opacity: 1; transform: translateY(0);}
        }

        .modal-title {
            font-size: 24px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 20px;
            color: #2c3e50;
        }

        /* 时间线样式 */
        .timeline {
            display: none;
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .timeline-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 25px;
            padding: 20px;
        }

        .timeline-item {
            background-color: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .timeline-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .timeline-date {
            font-size: 18px;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 15px;
        }

        .timeline-image {
            width: 100%;
            height: 220px;
            object-fit: cover;
            border-radius: 10px;
            transition: transform 0.3s ease;
        }

        .timeline-desc {
            margin-top: 15px;
            color: #666;
            line-height: 1.6;
        }

        /* 放大查看样式 */
        .lightbox {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.9);
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 1004;
        }

        .lightbox.show {
            opacity: 1;
        }

        .lightbox-content {
            position: relative;
            display: flex;
            width: 95%;
            height: 95%;
            margin: 2% auto;
            background-color: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 15px 30px rgba(0,0,0,0.3);
        }

        .lightbox-image {
            flex: 1.5;
            padding: 20px;
            background: #f8f9fa;
            overflow: auto;
        }

        .lightbox-image img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 10px;
        }

        .lightbox-info {
            flex: 1;
            padding: 30px;
            background-color: white;
            overflow-y: auto;
        }

        .close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 30px;
            color: black;
            cursor: pointer;
            transition: transform 0.3s ease;
            z-index: 1001;
        }

        .close-btn:hover {
            transform: rotate(90deg);
        }

        /* 小惊喜页面样式 */
        .surprise {
            display: none;
            padding: 30px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .surprise-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            padding: 20px;
        }

        /* 视频容器样式 */
        .video-container {
            position: relative;
            width: 100%;
            padding-top: 56.25%; /* 16:9 宽高比 */
            margin-bottom: 20px;
        }

        .video-container video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: contain; /* 确保视频保持原始宽高比 */
        }

        .surprise-item {
            background-color: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .surprise-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .surprise-title {
            font-size: 18px;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 15px;
        }

        .surprise-image {
            width: 100%;
            height: 220px;
            object-fit: cover;
            border-radius: 10px;
            transition: transform 0.3s ease;
        }

        /* 音乐播放按钮样式 */
        .music-btn {
            padding: 12px 25px;
            font-size: 18px;
            cursor: pointer;
            border: none;
            border-radius: 25px;
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            margin: 30px auto;
            display: block;
            transition: all 0.3s ease;
            box-shadow: 0 3px 6px rgba(0,0,0,0.1);
        }

        .music-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        /* 响应式设计 */
        @media (max-width: 768px) {
            .lightbox-content {
                flex-direction: column;
            }
            
            .lightbox-image {
                flex: 2;
            }
            
            .lightbox-info {
                flex: 1;
            }

            .nav-buttons {
                padding: 0 15px;
            }

            .countdown {
                font-size: 20px;
                padding: 20px;
                margin: 30px 15px;
            }

            .home-decoration {
                width: 100px;
            }
        }
        /* All existing styles remain unchanged */
        /* 所有现有样式保持不变 */
        /* ... */

        /* 新增样式 */
        .floating-message {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 20px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            z-index: 1001;
            display: none;
            animation: fadeInOut 3s ease;
        }

        @keyframes fadeInOut {
            0%, 100% { opacity: 0; transform: translateY(20px); }
            10%, 90% { opacity: 1; transform: translateY(0); }
        }

        .envelope {
            position: relative;
            width: 625px;
            height: 325px;
            margin: 200px auto;
            cursor: pointer;
            perspective: 1000px;
            z-index: 1;
        }

        .envelope-front {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 10px;
            transition: transform 0.5s ease;
            backface-visibility: hidden;
        }

        .envelope-back {
            position: absolute;
            width: 100%;
            height: 100%;
            background: #f0f0f0;
            border-radius: 10px;
            transform: rotateX(180deg);
            backface-visibility: hidden;
            transition: transform 0.5s ease;
        }

        .letter {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: white;
            border-radius: 10px;
            transform: translateY(-100%);
            transition: transform 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
        }

        .envelope.open .envelope-back {
            transform: rotateX(0);
        }

        .envelope.open .letter {
            transform: translateY(0);
            opacity: 1;
        }

        .cake-container {
            text-align: center;
            margin: 50px auto;
        }

        .cake-image {
            width: 300px; /* 根据需要调整大小 */
            height: auto;
            display: block;
            margin: 0 auto;
        }

        .greeting-image {
            width: 300px; /* 根据需要调整大小 */
            height: auto;
            display: block;
            margin: 20px auto;
        }

        /* 侧边菜单样式 */
        .sidebar {
            position: fixed;
            top: 0;
            left: -250px; /* 初始隐藏在左侧 */
            width: 250px;
            height: 100%;
            background-color: #333;
            color: white;
            transition: left 0.3s ease;
            z-index: 1002;
            padding-top: 60px;
        }

        .sidebar a {
            padding: 10px 15px;
            text-decoration: none;
            font-size: 18px;
            color: white;
            display: block;
            transition: background 0.3s ease;
        }

        .sidebar a:hover {
            background-color: #575757;
        }

        .menu-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            font-size: 30px;
            cursor: pointer;
            z-index: 1003;
        }

        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1001;
        }

        /* 更新公告模态框样式 */
        .update-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0);
            z-index: 1002;
            transition: background-color 0.3s ease;
        }

        .update-modal.show {
            background-color: rgba(0, 0, 0, 0.5);
        }

        .update-modal-content {
            position: relative;
            margin: 5% auto;
            width: 80%;
            max-width: 800px;
            height: 80vh;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
            transform: scale(0.7);
            opacity: 0;
            transition: all 0.3s ease;
        }

        .update-modal.show .update-modal-content {
            transform: scale(1);
            opacity: 1;
        }

        .update-modal-header {
            padding: 20px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: white;
            border-radius: 10px 10px 0 0;
        }

        .update-modal-title {
            font-size: 24px;
            font-weight: bold;
            color: #333;
        }

        .update-modal-close {
            color: #aaa;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            line-height: 1;
        }

        .update-modal-close:hover {
            color: black;
        }

        .update-modal-body {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }

        /* 更新卡片样式 */
        .update-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: relative;
        }

        /* 滚动条样式 */
        .update-modal-body::-webkit-scrollbar {
            width: 8px;
        }

        .update-modal-body::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }

        .update-modal-body::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }

        .update-modal-body::-webkit-scrollbar-thumb:hover {
            background: #555;
        }

        /* 在现有样式后添加分页相关样式 */
        .pagination {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }

        .page-btn {
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            background: #4CAF50;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .page-btn:hover {
            background: #45a049;
        }

        .surprise-content {
            min-height: 400px;
        }

        /* 添加音乐播放器样式 */
        .music-player {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            padding: 15px;
            width: 80%;
            max-width: 400px;
            margin: 20px auto;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .song-info {
            font-size: 14px;
            color: #666;
            margin-bottom: 10px;
        }

        .controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .play-btn {
            background: #4CAF50;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s ease;
        }

        .play-btn:hover {
            background: #45a049;
        }

        .progress-bar {
            flex: 1;
            height: 5px;
            background: #ddd;
            border-radius: 3px;
            position: relative;
            cursor: pointer;
        }

        .progress {
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            background: #4CAF50;
            border-radius: 3px;
            width: 0%;
        }

        .time {
            font-size: 12px;
            color: #666;
            min-width: 45px;
            text-align: center;
        }

        /* 更新公告模态框内容 */
        .update-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: relative;
        }

        .version-number {
            font-weight: bold;
            font-size: 1.2em;
            margin-bottom: 15px;
            color: #333;
        }

        .content-title {
            font-weight: bold;
            margin-bottom: 15px;
            color: #444;
        }

        .content-section {
            margin-bottom: 15px;
        }

        .section-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #555;
        }

        .section-item {
            margin-bottom: 8px;
            padding-left: 20px;
            line-height: 1.5;
            color: #666;
        }

        .update-date {
            position: absolute;
            bottom: 20px;
            right: 20px;
            font-family: "黑体";
            font-weight: bold;
            color: #333;
        }

        /* 在侧边菜单中添加进度按钮 */
        .sidebar-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px;
            margin-bottom: 10px;
            background: none;
            border: none;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .sidebar-btn:hover {
            background: #555;
        }

        /* 进度窗口 */
        .progress-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1003;
            justify-content: center;
            align-items: center;
        }

        .progress-modal-content {
            position: relative;
            margin: 5% auto;
            width: 80%;
            max-width: 500px;
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transform: scale(0.7);
            opacity: 0;
            transition: all 0.3s ease;
        }

        #progress-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0);
            z-index: 1002;
            transition: background-color 0.3s ease;
        }

        #progress-modal.show {
            background-color: rgba(0, 0, 0, 0.5);
        }

        #progress-modal.show .progress-modal-content {
            transform: scale(1);
            opacity: 1;
        }

        .close-btn {
            position: absolute;
            right: 20px;
            top: 10px;
            font-size: 24px;
            font-weight: bold;
            color: #aaa;
            cursor: pointer;
        }

        .close-btn:hover {
            color: black;
        }

        .progress-header {
            margin-bottom: 20px;
        }

        .achievement-stats {
            font-size: 14px;
            color: #666;
            margin-bottom: 10px;
        }

        .progress-bar-container {
            width: 100%;
            height: 20px;
            background-color: #ddd;
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-bar-achievements {
            height: 100%;
            background-color: #4CAF50;
            border-radius: 10px;
            transition: width 0.3s ease;
        }

        .achievement-item {
            margin-bottom: 10px;
            padding: 10px;
            background-color: #f8f9fa;
            border-radius: 5px;
        }

        /* 进度窗口样式 */
        .progress-modal-content {
            max-width: 500px;
        }

        .progress-header {
            margin-bottom: 20px;
        }

        .achievement-stats {
            font-size: 18px;
            margin: 15px 0;
        }

        .progress-bar-container {
            width: 100%;
            height: 20px;
            background-color: #eee;
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-bar-achievements {
            height: 100%;
            background-color: #4CAF50;
            width: 0%;
            transition: width 0.3s ease;
        }

        .achievements-container {
            max-height: 400px;
            overflow-y: auto;
        }

        .achievement-item {
            background: #f5f5f5;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            display: flex;
            align-items: center;
        }

        .achievement-item i {
            margin-right: 10px;
            color: #4CAF50;
        }

        /* 成就解锁提示样式 */
        .achievement-unlock-message {
            background-color: #4CAF50;
            color: black;
            padding: 10px 20px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        /* 侧边栏按钮样式 */
        .sidebar-btn {
            display: block;
            width: 100%;
            padding: 10px 20px;
            text-align: left;
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 16px;
        }

        .sidebar-btn:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        /* 进度窗口样式 */
        #progress-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0);
            z-index: 1002;
            transition: background-color 0.3s ease;
        }

        .progress-modal-content {
            position: relative;
            margin: 5% auto;
            width: 80%;
            max-width: 500px;
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transform: scale(0.7);
            opacity: 0;
            transition: all 0.3s ease;
        }

        #progress-modal.show {
            background-color: rgba(0, 0, 0, 0.5);
        }

        #progress-modal.show .progress-modal-content {
            transform: scale(1);
            opacity: 1;
        }

        .progress-header {
            margin-bottom: 20px;
        }

        .achievement-stats {
            font-size: 18px;
            margin: 15px 0;
        }

        .progress-bar-container {
            width: 100%;
            height: 20px;
            background-color: #eee;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .progress-bar-achievements {
            height: 100%;
            background-color: #4CAF50;
            width: 0%;
            transition: width 0.3s ease;
        }

        .achievements-container {
            max-height: 400px;
            overflow-y: auto;
        }

        .achievement-item {
            background: #f5f5f5;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .achievement-item i {
            color: #4CAF50;
        }

        /* 视频面板样式 */
        .video-panel {
            background: #f5f5f5;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .video-title {
            font-size: 14px;
            color: #333;
            margin-bottom: 10px;
            padding: 5px;
        }

        .video-container {
            position: relative;
            width: 100%;
            padding-top: 56.25%; /* 16:9 宽高比 */
        }

        .video-container video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .surprise-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            padding: 20px;
        }
    </style>
</head>
<body>
    <div id="current-time"></div>

    <div class="nav-buttons">
        <button class="nav-btn" onclick="showHome()">首页</button>
        <button class="nav-btn" onclick="showTimeline()">时间线显示</button>
        <button class="nav-btn" onclick="showSurprise()">小惊喜</button>
    </div>

    <div id="home-page">
        <img src="image\独角兽棋子-生日快乐.png" class="home-decoration left-top">
        <img src="image\金箔大气生日快乐.png" class="home-decoration right-top">
        <img src="image\生日快乐蛋糕.png" class="home-decoration left-bottom">
        <img src="image\生日快乐艺术字.png" class="home-decoration right-bottom">
        <div class="countdown" id="countdown"></div>
        <div class="nav-buttons">
            <button class="nav-btn" onclick="showInitialThoughts()">建站初心</button>
        </div>
        <img src="image\生日庆祝彩旗.png" class="home - decoration" style="bottom: 0; left: 0%; transform: translateX(50%); width: 50%; height: 50%;">
    </div>

    <div id="timeline-page" class="timeline">
        <div class="timeline-grid">
            <div class="timeline-item" onclick="showLightbox('image/初遇.jpg', '2023年8月24日', '这天我们初次相遇，初遇的那段时间，我们对彼此并非那么熟悉，但随着时间的推移，我们逐渐熟悉彼此，发现了彼此的优点，互相陪伴，互相鼓励，一起游戏，一起聊天，逐渐变成了无话不谈的挚友')">
                <div class="timeline-date">2023年8月24日</div>
                <img src="image/初遇.jpg" class="timeline-image" style="height: 200px; object-fit: cover; object-position: top; mask-image: linear-gradient(to bottom, black 80%, transparent 100%); -webkit-mask-image: linear-gradient(to bottom, black 80%, transparent 100%);">
                <div class="timeline-desc">这天我们初次相遇，初遇的那段时间，我们对彼此并非那么熟悉，但随着时间的推移，我们逐渐熟悉彼此，发现了彼此的优点，互相陪伴，互相鼓励，一起游戏，一起聊天，逐渐变成了无话不谈的挚友</div>
            </div>
            <div class="timeline-item" onclick="showLightbox('image/2023-12-02-我和蓉笙-100天纪念.png', '2023年12月02日', '这天是我们相识100天纪念日，同时也是你陪我度过的第一个生日，我很开心，也很幸福，可能就是那天，让我们对彼此有了更高的好感，为后来彼此的相爱打下了基础。我永远记得那天，我永远记得你，我永远爱你。')">
                <div class="timeline-date">2023年12月02日</div>
                <img src="image/2023-12-02-我和蓉笙-100天纪念.png" class="timeline-image">
                <div class="timeline-desc">这天是我们相识100天纪念日，同时也是你陪我度过的第一个生日，我很开心，也很幸福，可能就是那天，让我们对彼此有了更高的好感，为后来彼此的相爱打下了基础。我永远记得那天，我永远记得你，我永远爱你。</div>
            </div>
            <div class="timeline-item" onclick="showLightbox('image/2024年1月24日-幻梦and蓉笙-热气球后的月亮.png', '2024年1月24日', '我们在跑酷途中，停在一个热气球前，一起欣赏着日落')">
                <div class="timeline-date">2024年1月24日</div>
                <img src="image/2024年1月24日-幻梦and蓉笙-热气球后的月亮.png" class="timeline-image">
                <div class="timeline-desc">我们在跑酷途中，停在一个热气球前，一起欣赏着日落，我多希望时间能停留在那一刻，永远不要流逝</div>
            </div>
            <div class="timeline-item" onclick="showLightbox('image/2024年2月3日-蓉笙-两只小土豆子.png', '2024年2月3日', '我们在我的地图中玩的不亦乐乎，突然我变成了你的模样，我们快乐感染了彼此，那时候，我们笑的合不拢嘴')">
                <div class="timeline-date">2024年2月3日</div>
                <img src="image/2024年2月3日-蓉笙-两只小土豆子.png" class="timeline-image">
                <div class="timeline-desc">我们在我的地图中玩的不亦乐乎，突然我变成了你的模样，我们的快乐感染了彼此，那时候，我们笑的合不拢嘴</div>
            </div>
            <div class="timeline-item" onclick="showLightbox('image/2024年2月21日-蓉笙-一起看日落.jpg', '2024年2月21日', '我们一起在日落图中巡查，那时候的我还是风纪的一员，有时候我也会想，为了自己的利益，牺牲和朋友一起玩的时间，这真的值得吗……')">
                <div class="timeline-date">2024年2月21日</div>
                <img src="image/2024年2月21日-蓉笙-一起看日落.jpg" class="timeline-image">
                <div class="timeline-desc">我们一起在日落图中巡查，那时候的我还是风纪的一员，有时候我也会想，为了自己的利益，牺牲和朋友一起玩的时间，这真的值得吗……</div>
            </div>
            <div class="timeline-item" onclick="showLightbox('image/临时爱情图片.jpg', '2024年2月23日', '我们正式相爱啦！我永远记得那天，我永远记得你的一切，记得你所有的美好，逐渐了解你的性格，你的喜好，你的习惯，你的所有……')">
                <div class="timeline-date">2024年2月23日</div>
                <img src="image/临时爱情图片.jpg" class="timeline-image">
                <div class="timeline-desc">我们正式相爱啦！我永远记得那天，我永远记得你的一切，记得你所有的美好，逐渐了解你的性格，你的喜好，你的习惯，你的所有……</div>
            </div>
            <div class="timeline-item" onclick="showLightbox('image/2024年2月25日-柳儿-生存一起睡.png', '2024年2月25日', '我们在生存中一起睡觉，如此近的距离，我的心仿佛不再属于我，不再听从我的指挥')">
                <div class="timeline-date">2024年2月25日</div>
                <img src="image/2024年2月25日-柳儿-生存一起睡.png" class="timeline-image">
                <div class="timeline-desc">我们在生存中一起睡觉，如此近的距离，我的心仿佛不再属于我，不再听从我的指挥</div>
            </div>
            <div class="timeline-item" onclick="showLightbox('image/2024年3月29日-柳梦生存生存-双人比心.png', '2024年3月29日', '我们配合的那么巧妙，心形气泡冒出的那瞬间，我的心仿佛离我而去，飞向遥远的远方，飞向有你的地方')">
                <div class="timeline-date">2024年3月29日</div>
                <img src="image/2024年3月29日-柳梦生存生存-双人比心.png" class="timeline-image">
                <div class="timeline-desc">我们配合的那么巧妙，心形气泡冒出的那瞬间，我的心仿佛离我而去，飞向遥远的远方，飞向有你的地方</div>
            </div>
            <div class="timeline-item" onclick="showLightbox('image/2024年3月30日-柳儿-池塘倒映着硕大的玫瑰而我的眼中只有你.png', '2024年3月30日', '那天我们一起玩了一个跑酷的地图，地图里有那么多的美景，可在我眼中，它们都不及你一丝一毫，我的眼中只有你')">
                <div class="timeline-date">2024年3月30日</div>
                <img src="image/2024年3月30日-柳儿-池塘倒映着硕大的玫瑰而我的眼中只有你.png" class="timeline-image">
                <div class="timeline-desc">那天我们一起玩了一个跑酷的地图，地图里有那么多的美景，可在我眼中，它们都不及你一丝一毫，我的眼中只有你</div>
            </div>
            <div class="timeline-item" onclick="showLightbox('image/2024年6月10日-柳儿-默契度5200.png', '2024年6月10日', '我们的默契度达到5200啦！我默默许愿，让我们能一直这样默契下去，直到永远')">
                <div class="timeline-date">2024年6月10日</div>
                <img src="image/2024年6月10日-柳儿-默契度5200.png" class="timeline-image">
                <div class="timeline-desc">我们的默契度达到5200啦！我默默许愿，让我们能一直这样默契下去，直到永远</div>
            </div>
            <div class="timeline-item" onclick="showLightbox('image/2024年7月16日-柳儿and呆萌的樱娃娃店门前-三只小马宝莉.png', '2024年7月16日', '那天我们一起拍摄了这张图片，仿佛我们真的成为了一家人，我多希望这一切能成真哇')">
                <div class="timeline-date">2024年7月16日</div>
                <img src="image/2024年7月16日-柳儿and呆萌的樱娃娃店门前-三只小马宝莉.png" class="timeline-image">
                <div class="timeline-desc">那天我们一起拍摄了这张图片，仿佛我们真的成为了一家人，我多希望这一切能成真哇</div>
            </div>
            <div class="timeline-item" onclick="showLightbox('image/2024年7月27日-柳儿-天使与堕天使-救赎感极强.png', '2024年7月27日', '我收到了你送的安琪儿，我们一起在那张跑酷图中拍下了这张照片，它仿佛有无尽的救赎感，深入了我的内心')">
                <div class="timeline-date">2024年7月27日</div>
                <img src="image/2024年7月27日-柳儿-天使与堕天使-救赎感极强.png" class="timeline-image">
                <div class="timeline-desc">我收到了你送的安琪儿，我们一起在那张跑酷图中拍下了这张照片，它仿佛有无尽的救赎感，深入了我的内心</div>
            </div>
            <div class="timeline-item" onclick="showLightbox('image/2024年8月10日-柳儿-月季花海合照.png', '2024年8月10日', '那天是七夕节，我们在这个我奋斗了那么久的地图中留下了许多回忆，虽然地图已经停止了更新，但我们的记忆依然伴随着我们奋斗下去')">
                <div class="timeline-date">2024年8月10日</div>
                <img src="image/2024年8月10日-柳儿-月季花海合照.png" class="timeline-image">
                <div class="timeline-desc">那天是七夕节，我们在这个我奋斗了那么久的地图中留下了许多回忆，虽然地图已经停止了更新，但我们的记忆依然伴随着我们奋斗下去</div>
            </div>
            <div class="timeline-item" onclick="showLightbox('image/2024年10月4日-柳儿and樱-十字路口合照.png', '2024年10月4日', '那天我们在小镇，一个人扮演父亲，另一个人扮演母亲，我们三个人像是一家人，那么温馨，那么美好')">
                <div class="timeline-date">2024年10月4日</div>
                <img src="image/2024年10月4日-柳儿and樱-十字路口合照.png" class="timeline-image">
                <div class="timeline-desc">那天我们在小镇，一个人扮演父亲，另一个人扮演母亲，我们三个人像是一家人，那么温馨，那么美好</div>
            </div>
            <div class="timeline-item" onclick="showLightbox('image/2024年11月29日-柳儿-树顶拍照-1305x682.png', '2024年11月29日', '我们一起在心链空间拍下了这张照，我多希望我的心能和你的心连在一起，替你承担所有的痛苦与磨难，让你能健康快乐的长大')">
                <div class="timeline-date">2024年11月29日</div>
                <img src="image/2024年11月29日-柳儿-树顶拍照-1305x682.png" class="timeline-image">
                <div class="timeline-desc">我们一起在心链空间拍下了这张照，我多希望我的心能和你的心连在一起，替你承担所有的痛苦与磨难，让你能健康快乐的长大</div>
            </div>
            <div class="timeline-item" onclick="showLightbox('image/2024年12月15日-柳儿-像我带着女儿.jpg', '2024年12月15日', '那天我们一起在可以变成怪物的地图中，我们最终击败BOSS，那个在雪原生存中最讨厌的家伙，而我也变成了它，你则是拿着它的脑袋，你在我的臂弯下，仿佛像是我带了女儿一样')">
                <div class="timeline-date">2024年12月15日</div>
                <img src="image/2024年12月15日-柳儿-像我带着女儿.jpg" class="timeline-image">
                <div class="timeline-desc">那天我们一起在可以变成怪物的地图中，我们最终击败BOSS，那个在雪原生存中最讨厌的家伙，而我也变成了它，你则是拿着它的脑袋，你在我的臂弯下，仿佛像是我带了女儿一样</div>
            </div>
        </div>
    </div>

    <div id="surprise-page" class="surprise">
        <!-- 分页内容容器 -->
        <div id="surprise-content-1" class="surprise-content">
            <!-- 第1页：音乐按钮 -->
            <div class="music-player">
                <div class="song-info">我的梦 - 韩甜甜、小石头和孩子们</div>
                <div class="controls">
                    <button class="play-btn" id="playBtn" onclick="toggleMusic()">
                        <i class="fas fa-play"></i>
                    </button>
                    <div class="progress-bar">
                        <div class="progress" id="progress"></div>
                    </div>
                    <span class="time" id="currentTime">00:00</span>
                    <span class="time">/</span>
                    <span class="time" id="duration">00:00</span>
                </div>
            </div>
            <audio id="bgMusic" src="song\韩甜甜_小石头和孩子们-我的梦(Live).mp3"></audio>
        </div>

        <div id="surprise-content-2" class="surprise-content" style="display: none;">
            <!-- 第2页：视频内容 -->
            <div class="surprise-grid">
                <div class="video-panel">
                    <div class="video-title">测试-videos-测试1.mp4</div>
                    <div class="video-container">
                        <video width="100%" height="100%" controls preload="metadata">
                            <source src="videos/测试-videos-测试1.mp4" type="video/mp4">
                            您的浏览器不支持 video 标签。
                        </video>
                    </div>
                </div>
                <div class="video-panel">
                    <div class="video-title">测试-videos-测试2.mp4</div>
                    <div class="video-container">
                        <video width="100%" height="100%" controls>
                            <source src="videos/测试-videos-测试2.mp4" type="video/mp4">
                            您的浏览器不支持 video 标签。
                        </video>
                    </div>
                </div>
                <div class="video-panel">
                    <div class="video-title">测试-videos-测试3.mp4</div>
                    <div class="video-container">
                        <video width="100%" height="100%" controls>
                            <source src="videos/测试-videos-测试3.mp4" type="video/mp4">
                            您的浏览器不支持 video 标签。
                        </video>
                    </div>
                </div>
            </div>
        </div>

        <div id="surprise-content-3" class="surprise-content" style="display: none;">
            <!-- 第3页：贺图内容 -->
            <div class="surprise-grid">
                <div class="surprise-item" onclick="showLightbox('image/柳儿生日贺图-1.jpg', '贺图1', '')">
                    <div class="surprise-title">贺图1</div>
                    <img src="image\柳儿生日贺图-1.jpg" class="surprise-image">
                </div>
                <div class="surprise-item" onclick="showLightbox('image/柳儿生日贺图-2.jpg', '贺图2', '')">
                    <div class="surprise-title">贺图2</div>
                    <img src="image\柳儿生日贺图-2.jpg" class="surprise-image">
                </div>
                <div class="surprise-item" onclick="showLightbox('image/柳儿生日贺图-3.jpg', '贺图3', '')">
                    <div class="surprise-title">贺图3</div>
                    <img src="image\柳儿生日贺图-3.jpg" class="surprise-image">
                </div>
            </div>
        </div>

        <div id="surprise-content-4" class="surprise-content" style="display: none;">
            <!-- 第4页：隐藏内容 -->
            <div class="cake-container">
                <img src="image/公主生日蛋糕.png" class="cake-image">
                <img src="image/新贺图-信格式-隐藏页面下的图.jpg" class="greeting-image">
            </div>
        </div>

        <!-- 分页按钮 -->
        <div class="pagination">
            <button onclick="changePage('prev')" class="page-btn">上一页</button>
            <button onclick="goToPage(1)" class="page-btn">1</button>
            <button onclick="goToPage(2)" class="page-btn">2</button>
            <button onclick="goToPage(3)" class="page-btn">3</button>
            <button onclick="goToPage(4)" class="page-btn" id="page4Btn" style="display: none;">4</button>
            <button onclick="changePage('next')" class="page-btn">下一页</button>
        </div>
    </div>

    <div id="new-surprise-page" class="surprise" style="display: none;">
        <div class="cake-container">
            <img src="image/公主生日蛋糕.png" class="cake-image">
            <img src="image/新贺图-信格式-隐藏页面下的图.jpg" class="greeting-image">
        </div>
    </div>

    <div class="modal" id="thoughts-modal">
        <div class="modal-content" style="margin: 10% auto;">
            <h2 class="modal-title">建站初心</h2>
            <div style="max-height: 400px; overflow-y: auto; padding-right: 10px;">
                <p>这封信写于2024年12月7日<br>
                此网站的初步计划始于2024年12月5日<br>
                计划的正式实施是在2024年12月6日<br>
                我承认，制作的时间很短，也很草率，因此这个网站自然也不会是多么精细，必然会是一个很简陋、很粗糙的网站<br>
                最初的设计是在纸上绘画的计划草图，而周末回家后，我便努力把它从纸上的稿件和脑海中的遐想变为现实中可以看到的、可以被交互的、真实的内容。<br>
                我建立这个网站（虽然可能算不上网站），最多的是想给我的宝宝一个惊喜，我给不了她什么贵重的东西，也给不了什么让人羡慕的东西，这个网站不是多么精细，这点我清楚，我的水平不高，但我想尽自己所能，给她一个惊喜，我在网站内记录了我和她一路走来的许多经历，放了些许我自己制作的祝贺礼物，实际上更多的可能还是希望她能够开心吧，这或许就是我建立这个网站的初心。<br>
                <div style="text-align: right">——2024年12月7日 晚<br>开发者：柳洛梦<br>OS：是一个小废柴</div></p>
            </div>
        </div>
    </div>

    <div class="lightbox" id="lightbox">
        <div class="lightbox-content">
            <span class="close-btn" onclick="hideLightbox()">&times;</span>
            <div class="lightbox-image">
                <img id="lightbox-img" src="">
            </div>
            <div class="lightbox-info">
                <h2 id="lightbox-date"></h2>
                <p id="lightbox-desc"></p>
            </div>
        </div>
    </div>

    <!-- 三道横线按钮 -->
    <div class="menu-btn" onclick="toggleSidebar()">&#9776;</div>

    <!-- 侧边菜单 -->
    <div class="sidebar" id="sidebar">
        <a href="#" onclick="showUpdateNotice()">更新公告</a>
        <button onclick="showProgress()" class="sidebar-btn">
            <i class="fas fa-trophy"></i> 进度
        </button>
        <a href="#" onclick="showWaitingMessage()">等待更新……</a>
    </div>

    <!-- 覆盖层 -->
    <div class="overlay" id="overlay" onclick="toggleSidebar()"></div>

    <!-- 更新公告模态框 -->
    <div id="updateModal" class="update-modal">
        <div class="update-modal-content">
            <div class="update-modal-header">
                <div class="update-modal-title">更新公告</div>
                <span class="update-modal-close" onclick="closeUpdateModal()">&times;</span>
            </div>
            <div class="update-modal-body">
                <!-- beta0.4 更新内容 -->
                <div class="update-card">
                    <div class="version-number">beta0.4</div>
                    <div class="update-content">
                        <div class="content-title">更新内容</div>
                        <div class="content-section">
                            <div class="section-title">一、优化</div>
                            <div class="section-item">1. 修改放大后视图的关闭按钮颜色为黑色</div>
                            <div class="section-item">2. 修改放大后视图的关闭按钮位置为相对于底板，而不是相对于整个页面</div>
                        </div>
                        <div class="content-section">
                            <div class="section-title">二、新增</div>
                            <div class="section-item">1. 新增侧边菜单的更新公告</div>
                            <div class="section-item">2. 新增小惊喜中的彩蛋按钮</div>
                            <div class="section-item">3. 新增隐藏的惊喜</div>
                            <div class="section-item">4. 新增右下角提醒消息</div>
                        </div>
                        <div class="content-section">
                            <div class="section-title">三、修复</div>
                            <div class="section-item">1. 修复了在放大后视图下使用鼠标滚轮时，网页页面会滚动的问题</div>
                            <div class="section-item">2. 修复了部分区域文本存在乱码的bug</div>
                        </div>
                    </div>
                    <div class="update-date">2024年12月15日</div>
                </div>

                <!-- beta0.5 更新内容 -->
                <div class="update-card">
                    <div class="version-number">beta0.5</div>
                    <div class="update-content">
                        <div class="content-title">更新内容</div>
                        <div class="content-section">
                            <div class="section-title">一、优化</div>
                            <div class="section-item">1. 优化了侧边菜单开始按钮的层级问题，使得其不会遮挡其他内容</div>
                            <div class="section-item">2. 优化了小惊喜页面的排版，使其更加美观</div>
                            <div class="section-item">3. 优化了小惊喜页面的音乐窗口（当前使用的是测试音乐）</div>
                            <div class="section-item">4. 优化了小惊喜页面的视频窗口，并添加了测试视频</div>
                            <div class="section-item">5. 优化了更新公告的展示</div>
                            <div class="section-item">6. 优化了更新公告、建站初心的动画，使得其不那么僵硬</div>
                        </div>
                        <div class="content-section">
                            <div class="section-title">二、新增</div>
                            <div class="section-item">1. 新增了些许彩蛋</div>
                            <div class="section-item">2. 新增了成就系统</div>
                        </div>
                        <div class="content-section">
                            <div class="section-title">三、移除</div>
                            <div class="section-item">1. 移除了beta0.4版本中新增的"隐藏的惊喜、小惊喜中的菜单按钮"</div>
                        </div>
                    </div>
                    <div class="update-date">2024年12月20日</div>
                </div>
            </div>
        </div>
    </div>

    <!-- 进度窗口 -->
    <div id="progress-modal" class="modal">
        <div class="modal-content progress-modal-content">
            <span class="close-btn" onclick="closeProgressModal()">&times;</span>
            <div class="progress-header">
                <h2>解锁进度</h2>
                <div class="achievement-stats">
                    已解锁：<span id="unlocked-count">0</span> / <span id="total-count">0</span>
                </div>
                <div class="progress-bar-container">
                    <div class="progress-bar-achievements" id="achievements-progress"></div>
                </div>
            </div>
            <div class="achievements-container" id="achievements-list">
                <!-- 成就列表将通过 JavaScript 动态添加 -->
            </div>
        </div>
    </div>

    <script>
        // JavaScript代码保持不变
        // 更新当前时间
        function updateCurrentTime() {
            const now = new Date();
            document.getElementById('current-time').textContent = 
                now.toLocaleString('zh-CN', { 
                    year: 'numeric', 
                    month: '2-digit', 
                    day: '2-digit',
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit'
                });
        }

        // 计算距离下一个生日的时间
        function updateCountdown() {
            const now = new Date();
            let nextBirthday = new Date(now.getFullYear(), 3, 7); // 4月7日

            if (now > nextBirthday) {
                nextBirthday.setFullYear(nextBirthday.getFullYear() + 1);
            }

            const diff = nextBirthday - now;
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);

            document.getElementById('countdown').textContent = 
                `距离柳儿生日还有${days}天${hours}小时${minutes}分钟${seconds}秒`;
        }

        function showInitialThoughts() {
            const modal = document.getElementById('thoughts-modal');
            if (modal) {
                modal.style.display = 'block';
                handleThoughtsModalScroll();
                setTimeout(() => {
                    modal.classList.add('show');
                }, 10);
            }
        }

        function showHome() {
            document.getElementById('home-page').style.display = 'block';
            document.getElementById('timeline-page').style.display = 'none';
            document.getElementById('surprise-page').style.display = 'none';
        }

        function showTimeline() {
            document.getElementById('home-page').style.display = 'none';
            document.getElementById('timeline-page').style.display = 'block';
            document.getElementById('surprise-page').style.display = 'none';
        }

        function showSurprise() {
            document.getElementById('home-page').style.display = 'none';
            document.getElementById('timeline-page').style.display = 'none';
            document.getElementById('surprise-page').style.display = 'block';
            document.getElementById('new-surprise-page').style.display = 'none';
        }

        function showLightbox(imgSrc, date, desc) {
            const lightbox = document.getElementById('lightbox');
            const img = document.getElementById('lightbox-img');
            const dateEl = document.getElementById('lightbox-date');
            const descEl = document.getElementById('lightbox-desc');

            if (imgSrc) {
                img.src = imgSrc;
                img.style.display = 'block';
            } else {
                img.style.display = 'none';
            }
            
            dateEl.textContent = date;
            descEl.textContent = desc;

            lightbox.style.display = 'block';
            setTimeout(() => lightbox.classList.add('show'), 10);

            lightbox.addEventListener('wheel', function(event) {
                event.preventDefault();
                const delta = Math.sign(event.deltaY);
                lightbox.scrollTop += delta * 30;
            });
        }

        function hideLightbox() {
            const lightbox = document.getElementById('lightbox');
            lightbox.classList.remove('show');
            setTimeout(() => lightbox.style.display = 'none', 300);
        }

        window.onclick = function(event) {
            const updateModal = document.getElementById('updateModal');
            const thoughtsModal = document.getElementById('thoughts-modal');
            const progressModal = document.getElementById('progress-modal');
            
            if (event.target == updateModal) {
                closeUpdateModal();
            }
            if (event.target == thoughtsModal) {
                closeThoughtsModal();
            }
            if (event.target == progressModal) {
                closeProgressModal();
            }
        }

        function toggleMusic() {
            const music = document.getElementById('bgMusic');
            const playBtn = document.getElementById('playBtn');
            const icon = playBtn.querySelector('i');
            
            if (music.paused) {
                music.play();
                icon.className = 'fas fa-pause';
            } else {
                music.pause();
                icon.className = 'fas fa-play';
            }
        }

        // 添加音乐进度更新功能
        document.getElementById('bgMusic').addEventListener('timeupdate', function() {
            const progress = document.getElementById('progress');
            const currentTime = document.getElementById('currentTime');
            const duration = document.getElementById('duration');
            
            // 更新进度条
            const percent = (this.currentTime / this.duration) * 100;
            progress.style.width = percent + '%';
            
            // 更新时间显示
            currentTime.textContent = formatTime(this.currentTime);
            duration.textContent = formatTime(this.duration);
        });

        // 格式化时间显示
        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            seconds = Math.floor(seconds % 60);
            return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        // 添加进度条点击功能
        document.querySelector('.progress-bar').addEventListener('click', function(e) {
            const music = document.getElementById('bgMusic');
            const percent = e.offsetX / this.offsetWidth;
            music.currentTime = percent * music.duration;
        });

        // 初始化
        setInterval(updateCurrentTime, 1000);
        setInterval(updateCountdown, 1000);
        showHome();

        let currentPage = 1;
        let nextClickCount = 0;
        let lastPageClickCount = 0;

        function showFloatingMessage(message) {
            const messageEl = document.createElement('div');
            messageEl.className = 'floating-message';
            messageEl.textContent = message;
            document.body.appendChild(messageEl);
            messageEl.style.display = 'block';

            // 获取所有现有消息（不包括新创建的消息）
            const existingMessages = Array.from(document.querySelectorAll('.floating-message')).slice(0, -1);
            
            // 计算每条消息的高度
            const messageHeight = messageEl.offsetHeight;

            // 新消息放在底部
            messageEl.style.bottom = '20px';

            // 从下往上依次堆叠现有消息
            existingMessages.reverse().forEach((msg, index) => {
                msg.style.bottom = `${20 + (index + 1) * messageHeight}px`;
            });

            // 3秒后移除消息
            setTimeout(() => {
                messageEl.remove();
                // 重新调整剩余消息的位置
                const remainingMessages = Array.from(document.querySelectorAll('.floating-message')).reverse();
                remainingMessages.forEach((msg, index) => {
                    msg.style.bottom = `${20 + index * messageHeight}px`;
                });
            }, 3000);
        }

        function changePage(direction) {
            if (direction === 'prev') {
                if (currentPage === 1) {
                    showFloatingMessage('已经是第一页啦');
                    return;
                }
                currentPage--;
            } else {
                if (currentPage === 3) {
                    if (document.getElementById('page4Btn').style.display === 'none') {
                        nextClickCount++;
                        handlePage3NextClick();
                        return;
                    }
                }
                if (currentPage === 4) {
                    lastPageClickCount++;
                    handleLastPageClick();
                    return;
                }
                const maxPage = document.getElementById('page4Btn').style.display === 'none' ? 3 : 4;
                if (currentPage < maxPage) {
                    currentPage++;
                }
            }
            updatePageDisplay();
        }

        function goToPage(page) {
            currentPage = page;
            updatePageDisplay();
            
            // 当切换到第四页时解锁成就
            if (page === 4) {
                unlockAchievement('hiddenPage');
            }
        }

        function updatePageDisplay() {
            // 隐藏所有内容
            document.querySelectorAll('.surprise-content').forEach(content => {
                content.style.display = 'none';
            });
            // 显示当前页内容
            document.getElementById(`surprise-content-${currentPage}`).style.display = 'block';
            
            // 当显示第四页时解锁成就
            if (currentPage === 4) {
                unlockAchievement('hiddenPage');
            }
        }

        function handlePage3NextClick() {
            const messages = [
                "已经是最后一页啦ヾ(❀^ω^)ﾉﾞ",
                "尊嘟是最后一页啦(✪ω✪)",
                "后面真的没有啦(灬°ω°灬) ",
                "不要再按啦￣へ￣",
                "真的是最后一页了，你怎么能不相信我o(╥﹏╥)o",
                "唔，你难道知道了些什么Σ(っ°Д°;)っ",
                "不会吧，不可能不可能，你怎么会知道的(;≧Д≦)y",
                "你……你一定要逼我吗，还是你……真的知道了 o(TωT)o ",
                "那好吧…看样子你真的知道了，那那那我就摊牌了┐(・o・)┌ 其实还有第四页，那就给你看看吧，虽然没什么好看的╮(・o・)╭"
            ];

            if (nextClickCount <= messages.length) {
                showFloatingMessage(messages[nextClickCount - 1]);
            }

            if (nextClickCount === 9) {
                const page4Btn = document.getElementById('page4Btn');
                page4Btn.style.display = 'inline-block';
                unlockAchievement('hiddenPage'); // 在这里添加成就解锁
            }
        }

        function handleLastPageClick() {
            if (lastPageClickCount <= 25) {
                showFloatingMessage("已经是最后一页啦");
            } else if (lastPageClickCount === 26) {
                showFloatingMessage("我是有底线的");
                unlockAchievement('bottomLine');
            } else if (lastPageClickCount === 52) {
                showFloatingMessage("好吧，开发者让我转交给你一个东西，mua~");
                unlockAchievement('developerGift');
            } else if (lastPageClickCount >= 53 && lastPageClickCount <= 103) {
                const messages = [
                    "mua! (*╯3╰)",
                    "ღ( ´･ᴗ･` )比心",
                    "♥(๑> ₃ <)♥"
                ];
                showFloatingMessage(messages[Math.floor(Math.random() * messages.length)]);
            } else if (lastPageClickCount === 104) {
                showFloatingMessage("唔哇，你不累吗？");
            } else if (lastPageClickCount === 105) {
                showFloatingMessage("唔，好吧，我累了，你自己玩吧");
                unlockAchievement('tiredSystem');
            } else {
                showFloatingMessage("已经是最后一页啦");
            }
        }

        // 初始化显示第一页
        updatePageDisplay();

        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('overlay');
            if (sidebar.style.left === '0px') {
                sidebar.style.left = '-250px';
                overlay.style.display = 'none';
            } else {
                sidebar.style.left = '0px';
                overlay.style.display = 'block';
            }
        }

        function showUpdateNotice() {
            const modal = document.getElementById('updateModal');
            if (modal) {
                modal.style.display = 'block';
                handleUpdateModalScroll();
                setTimeout(() => {
                    modal.classList.add('show');
                }, 10);
            }
        }

        function handleUpdateModalScroll() {
            const modalBody = document.querySelector('.update-modal-body');
            
            modalBody.addEventListener('wheel', function(event) {
                const scrollTop = this.scrollTop;
                const scrollHeight = this.scrollHeight;
                const height = this.clientHeight;
                
                // 当滚动到顶部或底部时阻止事件传递
                if (
                    (scrollTop === 0 && event.deltaY < 0) || // 到达顶部且继续向上滚动
                    (scrollTop + height >= scrollHeight && event.deltaY > 0) // 到达底部且继续向下滚动
                ) {
                    event.preventDefault();
                }
            });
        }

        function closeUpdateModal() {
            const modal = document.getElementById('updateModal');
            if (modal) {
                modal.classList.remove('show');
                setTimeout(() => {
                    modal.style.display = 'none';
                }, 300);
            }
        }

        function showWaitingMessage() {
            showFloatingMessage('等待更新中，敬请期待');
        }

        function closeThoughtsModal() {
            const modal = document.getElementById('thoughts-modal');
            if (modal) {
                modal.classList.remove('show');
                setTimeout(() => {
                    modal.style.display = 'none';
                }, 300);
            }
        }

        function handleThoughtsModalScroll() {
            const modalContent = document.querySelector('.modal-content > div');
            
            modalContent.addEventListener('wheel', function(event) {
                const scrollTop = this.scrollTop;
                const scrollHeight = this.scrollHeight;
                const height = this.clientHeight;
                
                // 当滚动到顶部或底部时阻止事件传递
                if (
                    (scrollTop === 0 && event.deltaY < 0) || // 到达顶部且继续向上滚动
                    (scrollTop + height >= scrollHeight && event.deltaY > 0) // 到达底部且继续向下滚动
                ) {
                    event.preventDefault();
                }
            });
        }

        // 成就系统
        const achievements = {
            hiddenPage: {
                id: 'hiddenPage',
                name: '隐藏的页面',
                description: '发现隐藏的第四页',
                unlocked: false
            },
            bottomLine: {
                id: 'bottomLine',
                name: '有底线的系统',
                description: '在第四页点击了26次下一页',
                unlocked: false
            },
            developerGift: {
                id: 'developerGift',
                name: '开发者的馈赠',
                description: '在第四页点击了52次下一页',
                unlocked: false
            },
            tiredSystem: {
                id: 'tiredSystem',
                name: '疲劳的系统',
                description: '在第四页点击了105次下一页',
                unlocked: false
            }
        };

        // 显示进度窗口
        function showProgress() {
            const modal = document.getElementById('progress-modal');
            if (modal) {
                modal.style.display = 'block';
                updateProgressDisplay();
                setTimeout(() => {
                    modal.classList.add('show');
                }, 10);
            }
        }

        // 关闭进度窗口
        function closeProgressModal() {
            const modal = document.getElementById('progress-modal');
            if (modal) {
                modal.classList.remove('show');
                setTimeout(() => {
                    modal.style.display = 'none';
                }, 300);
            }
        }

        // 更新进度显示
        function updateProgressDisplay() {
            const unlockedCount = Object.values(achievements).filter(a => a.unlocked).length;
            const totalCount = Object.keys(achievements).length;
            
            document.getElementById('unlocked-count').textContent = unlockedCount;
            document.getElementById('total-count').textContent = totalCount;
            
            const progressBar = document.getElementById('achievements-progress');
            if (progressBar) {
                progressBar.style.width = `${(unlockedCount / totalCount) * 100}%`;
            }
            
            updateAchievementsList();
        }

        // 更新成就列表
        function updateAchievementsList() {
            const container = document.getElementById('achievements-list');
            if (container) {
                container.innerHTML = '';
                
                Object.values(achievements).forEach(achievement => {
                    if (achievement.unlocked) {
                        const item = document.createElement('div');
                        item.className = 'achievement-item';
                        item.innerHTML = `
                            <i class="fas fa-trophy"></i>
                            <div>
                                <div><strong>${achievement.name}</strong></div>
                                <div>${achievement.description}</div>
                            </div>
                        `;
                        container.appendChild(item);
                    }
                });
            }
        }

        // 解锁成就
        function unlockAchievement(achievementId) {
            const achievement = achievements[achievementId];
            if (achievement && !achievement.unlocked) {
                achievement.unlocked = true;
                showFloatingMessage(`已解锁成就：${achievement.name}`, 'achievement');
                updateProgressDisplay();
            }
        }

        // 修改现有的 showFloatingMessage 函数
        function showFloatingMessage(message, type = 'normal') {
            const messageEl = document.createElement('div');
            messageEl.className = type === 'achievement' ? 
                'floating-message achievement-unlock-message' : 
                'floating-message';
            messageEl.textContent = message;
            document.body.appendChild(messageEl);
            messageEl.style.display = 'block';

            // 获取所有现有消息（不包括新创建的消息）
            const existingMessages = Array.from(document.querySelectorAll('.floating-message')).slice(0, -1);
            
            // 计算每条消息的高度
            const messageHeight = messageEl.offsetHeight;

            // 新消息放在底部
            messageEl.style.bottom = '20px';

            // 从下往上依次堆叠现有消息
            existingMessages.reverse().forEach((msg, index) => {
                msg.style.bottom = `${20 + (index + 1) * messageHeight}px`;
            });

            // 3秒后移除消息
            setTimeout(() => {
                messageEl.remove();
                // 重新调整剩余消息的位置
                const remainingMessages = Array.from(document.querySelectorAll('.floating-message')).reverse();
                remainingMessages.forEach((msg, index) => {
                    msg.style.bottom = `${20 + index * messageHeight}px`;
                });
            }, 3000);
        }
    </script>
</body>
</html>
